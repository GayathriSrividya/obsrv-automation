namespace: setup-sb-datasets
image:
  repository: docker.io/bitnami/postgresql
  tag: 11.11.0-debian-10-r31
  pullPolicy: IfNotPresent
environment: dev
desktop_pdata_id: dev.sunbird.desktop
env:
  druid_router_host: druid-raw-routers.druid-raw.svc:8888
  supervisor_path: druid/indexer/v1/supervisor
  bootstrap_servers: kafka-headless.kafka.svc.local:9092
  pg_host:  postgresql-hl.postgresql.svc
  pg_port: "5432"
  pg_user:  obsrv 
  pg_pass:  obsrv123
  pg_dbname:  obsrv
  sql_script:

    INSERT INTO "datasets" ("id", "dataset_id", "type", "name", "validation_config", "extraction_config", "dedup_config", "data_schema", "denorm_config", "router_config", "dataset_config", "status", "tags", "data_version", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-user-master', 'sb-user-master', 'master-dataset', 'sb-user-master', '{"validate":true,"mode":"Strict","validation_mode":"Strict"}',
    '{"is_batch_event":false,"extraction_key":"","dedup_config":{"drop_duplicates":true,"dedup_key":"id","dedup_period":1036800},"batch_id":"id"}', '{"drop_duplicates":true,"dedup_key":"mid","dedup_period":1036800}', '{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","properties":{"userid": {"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"state":{"type":"string"},"district":{"type":"string"},"block":{"type":"string"},"cluster":{"type":"string"},"schooludisecode":{"type":"string"},"schoolname":{"type":"string"},"usertype":{"type":"string"},"usersubtype":{"type":"string"},"board":{"type":"string"},"rootorgid":{"type":"string"},"orgname":{"type":"string"},"subject":{"type":"array","items":[{"type":"string"}]},"language":{"type":"array","items":[{"type":"string"}]},"grade":{"type":"array","items":[{"type":"string"}]},"framework":{"type":"string"},"medium":{"type":"array","items":[{"type":"string"}]},"profileusertypes":{"type":"array","items":[{"type":"object","properties":{"subType":{"type":"string"},"type":{"type":"string"}}},{"type":"object","properties":{"type":{"type":"string"}}},{"type":"object","properties":{"subType":{"type":"string"},"type":{"type":"string"}}},{"type":"object","properties":{"type":{"type":"string"}}},{"type":"object","properties":{"type":{"type":"string"}}}]}}}', '{"redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"denorm_fields":[]}', '{"topic":"sb-user-master"}', '{"data_key":"userid","timestamp_key":"","exclude_fields":[],"entry_topic":"sunbird-dev.masterdata.ingest","redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"index_data":false,"redis_db":3}', 'ACTIVE', '{}' , 1, 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasets" ("id", "dataset_id", "type", "name", "validation_config", "extraction_config", "dedup_config", "data_schema", "denorm_config", "router_config", "dataset_config", "status", "tags", "data_version", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-device-master', 'sb-device-master', 'master-dataset', 'sb-device-master', '{"validate":true,"mode":"Strict","validation_mode":"Strict"}', '{"is_batch_event":false,"extraction_key":"","dedup_config":{"drop_duplicates":true,"dedup_key":"id","dedup_period":1036800},"batch_id":"id"}', '{"drop_duplicates":true,"dedup_key":"mid","dedup_period":1036800}', '{"$schema":"https://json-schema.org/draft/2020-12/schema","type":"object","properties":{"fcm_token":{"type":"string"},"city":{"type":"string"},"device_id":{"type":"string"},"device_spec":{"type":"object","properties":{"os":{"type":"string"},"cpu":{"type":"string"},"make":{"type":"string"}}},"state":{"type":"string"},"uaspec":{"type":"object","properties":{"agent":{"type":"string"},"ver":{"type":"string"},"system":{"type":"string"},"raw":{"type":"string"}}},"country":{"type":"string"},"country_code":{"type":"string"},"producer_id":{"type":"string"},"state_code_custom":{"type":"integer"},"state_code":{"type":"string"},"state_custom":{"type":"string"},"district_custom":{"type":"string"},"first_access":{"type":"integer","format":"date-time"},"api_last_updated_on":{"type":"integer","format":"date-time"},"user_declared_district":{"type":"string"},"user_declared_state":{"type":"string"}}', '{"redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"denorm_fields":[]}', '{"topic":"sb-device-master"}', '{"data_key":"device_id","timestamp_key":"","exclude_fields":[],"entry_topic":"sunbird-dev.masterdata.ingest","redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"index_data":false,"redis_db":4}', 'ACTIVE', '{}' , 1, 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasets" ("id", "dataset_id", "type", "name", "validation_config", "extraction_config", "dedup_config", "data_schema", "denorm_config", "router_config", "dataset_config", "status", "tags", "data_version", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-content-master', 'sb-content-master', 'master-dataset', 'sb-content-master', '{"validate":true,"mode":"Strict","validation_mode":"Strict"}','{"is_batch_event":false,"extraction_key":"","dedup_config":{"drop_duplicates":true,"dedup_key":"id","dedup_period":1036800},"batch_id":"id"}', 
    '{"drop_duplicates":true,"dedup_key":"mid","dedup_period":1036800}', '{"$id":"content-schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Content","type":"object","required":["name","code"],"properties":{"name":{"type":"string","minLength":5},"code":{"type":"string"},"createdOn":{"type":"string"},"lastUpdatedOn":{"type":"string"},"status":{"type":"string","enum":["Draft","Review","Redraft","Flagged","Live","Unlisted","Retired","Mock","Processing","FlagDraft","FlagReview","Failed"],"default":"Draft"},"channel":{"type":"string"},"mimeType":{"type":"string","enum":["application/vnd.ekstep.ecml-archive","application/vnd.ekstep.html-archive","application/vnd.android.package-archive","application/vnd.ekstep.content-archive","application/vnd.ekstep.content-collection","application/vnd.ekstep.plugin-archive","application/vnd.ekstep.h5p-archive","application/epub","text/x-url","video/x-youtube","application/octet-stream","application/msword","application/pdf","image/jpeg","image/jpg","image/png","image/tiff","image/bmp","image/gif","image/svg+xml","video/avi","video/mpeg","video/quicktime","video/3gpp","video/mp4","video/ogg","video/webm","audio/mp3","audio/mp4","audio/mpeg","audio/ogg","audio/webm","audio/x-wav","audio/wav","application/json","application/quiz"]},"osId":{"type":"string","default":"org.ekstep.launcher"},"contentEncoding":{"type":"string","enum":["gzip","identity"],"default":"gzip"},"contentDisposition":{"type":"string","enum":["inline","online","attachment","online-only"],"default":"inline"},"mediaType":{"type":"string","enum":["content","collection","image","video","audio","voice","ecml","document","pdf","text","other"],"default":"content"},"os":{"type":"array","items":{"type":"string","enum":["All","Android","iOS","Windows"]},"default":["All"]},"minOsVersion":{"type":"string"},"compatibilityLevel":{"type":"number","default":1},"minGenieVersion":{"type":"string"},"minSupportedVersion":{"type":"string"},"filter":{"type":"array","items":{"type":"string"}},"variants":{"type":"object"},"config":{"type":"object"},"visibility":{"type":"string","enum":["Default","Parent","Private","Protected"],"default":"Default"},"audience":{"type":"array","items":{"type":"string","enum":["Student","Teacher","Administrator","Parent","Others","Other"]},"default":["Student"]},"posterImage":{"type":"string","format":"url"},"badgeAssertions":{"type":"array","items":{"type":"object"}},"targets":{"type":"array","items":{"type":"object"}},"contentCredits":{"type":"array","items":{"type":"object"}},"appIcon":{"type":"string","format":"url"},"grayScaleAppIcon":{"type":"string","format":"url"},"thumbnail":{"type":"string","format":"url"},"screenshots":{"type":"string"},"format":{"type":"string"},"duration":{"type":"string"},"size":{"type":"number"},"idealScreenSize":{"type":"string","enum":["small","normal","large","xlarge","other"],"default":"normal"},"idealScreenDensity":{"type":"string","enum":["ldpi","mdpi","hdpi","xhdpi","xxhdpi","xxxhdpi"],"default":"hdpi"},"releaseNotes":{"type":"array"},"pkgVersion":{"type":"number"},"semanticVersion":{"type":"string"},"versionKey":{"type":"string"},"resources":{"type":"array","items":{"type":"string","enum":["Speaker","Touch","Microphone","GPS","Motion Sensor","Compass"]}},"downloadUrl":{"type":"string","format":"url"},"artifactUrl":{"type":"string","format":"url"},"previewUrl":{"type":"string","format":"url"},"streamingUrl":{"type":"string","format":"url"},"objects":{"type":"array"},"organization":{"type":"array"},"createdFor":{"type":"array"},"developer":{"type":"string"},"source":{"type":"string"},"notes":{"type":"string"},"pageNumber":{"type":"string"},"publication":{"type":"string"},"edition":{"type":"string"},"publisher":{"type":"string"},"author":{"type":"string"},"owner":{"type":"string"},"attributions":{"type":"array"},"collaborators":{"type":"array"},"creators":{"type":"string"},"contributors":{"type":"string"},"voiceCredits":{"type":"array"},"soundCredits":{"type":"array"},"imageCredits":{"type":"array"},"copyright":{"type":"string"},"license":{"type":"string","default":"CC BY 4.0"},"language":{"type":"array","items":{"type":"string","enum":["English","Hindi","Assamese","Bengali","Gujarati","Kannada","Malayalam","Marathi","Nepali","Odia","Punjabi","Tamil","Telugu","Urdu","Sanskrit","Maithili","Munda","Santali","Juang","Ho","Other"]},"default":["English"]},"languageCode":{"type":"array"},"words":{"type":"array"},"text":{"type":"array"},"forkable":{"type":"boolean"},"translatable":{"type":"boolean"},"ageGroup":{"type":"array","items":{"type":"string","enum":["<5","5-6","6-7","7-8","8-10",">10","Other"]}},"interactivityLevel":{"type":"string","enum":["High","Medium","Low"]},"contentType":{"type":"string","enum":["Resource","Collection","TextBook","LessonPlan","Course","Template","Asset","Plugin","LessonPlanUnit","CourseUnit","TextBookUnit","TeachingMethod","PedagogyFlow","FocusSpot","LearningOutcomeDefinition","PracticeQuestionSet","CuriosityQuestionSet","MarkingSchemeRubric","ExplanationResource","ExperientialResource","ConceptMap","SelfAssess","PracticeResource","eTextBook","OnboardingResource","ExplanationVideo","ClassroomTeachingVideo","ExplanationReadingMaterial","LearningActivity","PreviousBoardExamPapers","LessonPlanResource","TVLesson"]},"resourceType":{"type":"string","enum":["Read","Learn","Teach","Play","Test","Practice","Experiment","Collection","Book","Lesson Plan","Course","Theory","Worksheet","Practical"]},"category":{"type":"array","items":{"type":"string","enum":["core","learning","literacy","math","science","time","wordnet","game","mcq","mtf","ftb","library"]}},"templateType":{"type":"string","enum":["story","worksheet","mcq","ftb","mtf","recognition","activity","widget","other"]},"genre":{"type":"array","items":{"type":"string","enum":["Picture Books","Chapter Books","Flash Cards","Serial Books","Alphabet Books","Folktales","Fiction","Non-Fiction","Poems/Rhymes","Plays","Comics","Words"]}},"theme":{"type":"array","items":{"type":"string","enum":["History","Adventure","Mystery","Science","Nature","Art","Music","Funny","Family","Life Skills","Scary","School Stories","Holidays","Hobby","Geography","Rural","Urban"]}},"themes":{"type":"array"},"rating":{"type":"number"},"rating_a":{"type":"number"},"quality":{"type":"number"},"genieScore":{"type":"number"},"authoringScore":{"type":"number"},"popularity":{"type":"number"},"downloads":{"type":"number"},"launchUrl":{"type":"string"},"activity_class":{"type":"string"},"draftImage":{"type":"string"},"scaffolding":{"type":"array","items":{"type":"string","enum":["Tutorial","Help","Practice"]}},"interceptionPoints":{"type":"object","items":{"type":"array"},"default":{}},"interceptionType":{"type":"string","enum":["Timestamp"]},"feedback":{"type":"array","items":{"type":"string","enum":["Right/Wrong","Reflection","Guidance","Learn from Mistakes","Adaptive Feedback","Interrupts","Rich Feedback"]}},"feedbackType":{"type":"array","items":{"type":"string","enum":["Audio","Visual","Textual","Tactile"]}},"teachingMode":{"type":"string","enum":["Abstract","Concrete","Pictorial"]},"skills":{"type":"array","items":{"type":"string","enum":["Listening","Speaking","Reading","Writing","Touch","Gestures","Draw"]}},"keywords":{"type":"array"},"domain":{"type":"array"},"dialcodes":{"type":"array"},"optStatus":{"type":"string","enum":["Pending","Processing","Error","Complete"]},"description":{"type":"string"},"instructions":{"type":"string"},"body":{"type":"string"},"oldBody":{"type":"string"},"stageIcons":{"type":"string"},"editorState":{"type":"string"},"data":{"type":"array"},"loadingMessage":{"type":"string"},"checksum":{"type":"string"},"learningObjective":{"type":"array"},"createdBy":{"type":"string"},"creator":{"type":"string"},"reviewer":{"type":"string"},"lastUpdatedBy":{"type":"string"},"lastSubmittedBy":{"type":"string"},"lastSubmittedOn":{"type":"string"},"lastPublishedBy":{"type":"string"},"lastPublishedOn":{"type":"string"},"versionDate":{"type":"string"},"origin":{"type":"string"},"originData":{"type":"object"},"versionCreatedBy":{"type":"string"},"me_totalSessionsCount":{"type":"number"},"me_creationSessions":{"type":"number"},"me_creationTimespent":{"type":"number"},"me_totalTimespent":{"type":"number"},"me_totalInteractions":{"type":"number"},"me_averageInteractionsPerMin":{"type":"number"},"me_averageSessionsPerDevice":{"type":"number"},"me_totalDevices":{"type":"number"},"me_averageTimespentPerSession":{"type":"number"},"me_averageRating":{"type":"number"},"me_totalDownloads":{"type":"number"},"me_totalSideloads":{"type":"number"},"me_totalRatings":{"type":"number"},"me_totalComments":{"type":"number"},"me_totalUsage":{"type":"number"},"me_totalLiveContentUsage":{"type":"number"},"me_usageLastWeek":{"type":"number"},"me_deletionsLastWeek":{"type":"number"},"me_lastUsedOn":{"type":"string"},"me_lastRemovedOn":{"type":"string"},"me_hierarchyLevel":{"type":"number"},"me_totalDialcodeAttached":{"type":"number"},"me_totalDialcodeLinkedToContent":{"type":"number"},"me_totalDialcode":{"type":"array"},"flagReasons":{"type":"array","items":{"type":"string","enum":["Inappropriate Content","Copyright Violation","Privacy Violation","Other"]}},"flaggedBy":{"type":"array"},"flags":{"type":"array"},"lastFlaggedOn":{"type":"string"},"tempData":{"type":"string"},"copyType":{"type":"string"},"pragma":{"type":"array","items":{"type":"string","enum":["external","ads"]}},"publishChecklist":{"type":"array"},"publishComment":{"type":"string"},"rejectReasons":{"type":"array"},"rejectComment":{"type":"string"},"totalQuestions":{"type":"number"},"totalScore":{"type":"number"},"ownershipType":{"type":"array","items":{"type":"string","enum":["createdBy","createdFor"]},"default":["createdBy"]},"reservedDialcodes":{"type":"object"},"dialcodeRequired":{"type":"string","enum":["Yes","No"],"default":"No"},"lockKey":{"type":"string"},"badgeAssociations":{"type":"object"},"framework":{"type":"string","default":"NCF"},"lastStatusChangedOn":{"type":"string"},"uploadError":{"type":"string"},"appId":{"type":"string"},"s3Key":{"type":"string"},"consumerId":{"type":"string"},"organisation":{"type":"array"},"nodeType":{"type":"string"},"prevState":{"type":"string"},"publishError":{"type":"string"},"publish_type":{"type":"string"},"ownedBy":{"type":"string"},"purpose":{"type":"string"},"toc_url":{"type":"string","format":"url"},"reviewError":{"type":"string"},"mimeTypesCount":{"type":"string"},"contentTypesCount":{"type":"string"},"childNodes":{"type":"array"},"leafNodesCount":{"type":"number"},"depth":{"type":"number"},"SYS_INTERNAL_LAST_UPDATED_ON":{"type":"string"},"assets":{"type":"array"},"version":{"type":"number","default":2},"qrCodeProcessId":{"type":"string"},"migratedUrl":{"type":"string","format":"url"},"totalCompressedSize":{"type":"number"},"programId":{"type":"string"},"leafNodes":{"type":"array"},"editorVersion":{"type":"number"},"unitIdentifiers":{"type":"array"},"questionCategories":{"type":"array"},"certTemplate":{"type":"array","items":{"type":"object"}},"subject":{"type":"array"},"medium":{"type":"array"},"gradeLevel":{"type":"array"},"topic":{"type":"array"},"subDomains":{"type":"array"},"subjectCodes":{"type":"array"},"difficultyLevel":{"type":"string"},"board":{"type":"string"},"licenseterms":{"type":"string"},"copyrightYear":{"type":"number","minimum":2020,"maximum": 3000,"exclusiveMaximum":true},"organisationId":{"type":"string"},"itemSetPreviewUrl":{"type":"string"},"textbook_name":{"type":"array"},"level1Name":{"type":"array"},"level1Concept":{"type":"array"},"level2Name":{"type":"array"},"level2Concept":{"type":"array"},"level3Name":{"type":"array"},"level3Concept":{"type":"array"},"sourceURL":{"type":"string"},"me_totalTimeSpentInSec":{"type":"object"},"me_totalPlaySessionCount":{"type":"object"},"me_totalRatingsCount":{"type":"number"},"monitorable":{"type":"array","items":{"type":"string","enum":["progress-report","score-report"]}},"userConsent":{"type":"string","enum":["Yes","No"]},"trackable":{"type":"object","properties":{"enabled":{"type":"string","enum":["Yes","No"],"default":"No"},"autoBatch":{"type":"string","enum":["Yes","No"],"default":"No"}},"default":{"enabled":"No","autoBatch":"No"},"additionalProperties":false},"credentials":{"type":"object","properties":{"enabled":{"type":"string","enum":["Yes","No"],"default":"No"}},"default":{"enabled":"No"},"additionalProperties":false},"discussionForum":{"type":"object","properties":{"enabled":{"type":"string","enum":["Yes","No"],"default":"No"}},"default":{"enabled":"No"},"additionalProperties":false},"processId":{"type":"string"},"primaryCategory":{"type":"string"},"additionalCategories":{"type":"array","items":{"type":"string"}},"prevStatus":{"type":"string"},"cloudStorageKey":{"type":"string"},"batches":{"type":"array","items":{"type":"object"}},"year":{"type":"string"},"plugins":{"type":"array","items":{"type":"object"}},"showNotification":{"type":"boolean"},"collectionId":{"type":"string"},"learningOutcome":{"type":"array","items":{"type":"string"}},"displayScore":{"type":"boolean"},"catalogPaths":{"type":"array","items":{"type":"object"}},"competencies":{"type":"array","items":{"type":"object"}},"sharedWith":{"type":"array"},"isExternal":{"type":"boolean"},"learningMode":{"type":"string","enum":["Self Paced","Instructor Led","Classroom"]},"creatorLogo":{"type":"string","format":"url"},"subTitles":{"type":"array","items":{"type":"object"}},"reviewStatus":{"type":"string","enum":["InReview","Reviewed"]},"boardIds":{"type":"array","items":{"type":"string"}},"gradeLevelIds":{"type":"array","items":{"type":"string"}},"subjectIds":{"type":"array","items":{"type":"string"}},"mediumIds":{"type":"array","items":{"type":"string"}},"topicsIds":{"type":"array","items":{"type":"string"}},"targetFWIds":{"type":"array","items":{"type":"string"}},"targetBoardIds":{"type":"array","items":{"type":"string"}},"targetGradeLevelIds":{"type":"array","items":{"type":"string"}},"targetSubjectIds":{"type":"array","items":{"type":"string"}},"targetMediumIds":{"type":"array","items":{"type":"string"}},"targetTopicIds":{"type":"array","items":{"type":"string"}},"maxAttempts":{"type":"number"},"se_FWIds":{"type":"array","items":{"type":"string"}},"se_boardIds":{"type":"array","items":{"type":"string"}},"se_subjectIds":{"type":"array","items":{"type":"string"}},"se_mediumIds":{"type":"array","items":{"type":"string"}},"se_topicIds":{"type":"array","items":{"type":"string"}},"se_gradeLevelIds":{"type":"array","items":{"type":"string"}},"se_boards":{"type":"array","items":{"type":"string"}},"se_subjects":{"type":"array","items":{"type":"string"}},"se_mediums":{"type":"array","items":{"type":"string"}},"se_topics":{"type":"array","items":{"type":"string"}},"se_gradeLevels":{"type":"array","items":{"type":"string"}},"transcripts":{"type":"array","items":{"type":"object"}},"accessibility":{"type":"array","items":{"type":"object"}},"taxonomyPaths_v2":{"type":"array","items":{"type":"object"}},"competencies_v3":{"type":"array","items":{"type":"object"}},"migrationVersion":{"type":"number"}}}','{"redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"denorm_fields":[]}', '{"topic":"sb-content-master"}', '{"data_key":"nodeUniqueId","timestamp_key":"","exclude_fields":[],"entry_topic":"sunbird-dev.masterdata.ingest","redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"index_data":false,"redis_db":5}', 'ACTIVE', '{}' , 1, 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());
    
    INSERT INTO "datasets" ("id", "dataset_id", "type", "name", "validation_config", "extraction_config", "dedup_config", "data_schema", "denorm_config", "router_config", "dataset_config", "status", "tags", "data_version", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-dialcode-master', 'sb-dialcode-master', 'master-dataset', 'sb-dialcode-master', '{"validate":true,"mode":"Strict","validation_mode":"Strict"}','{"is_batch_event":false,"extraction_key":"","dedup_config":{"drop_duplicates":true,"dedup_key":"id","dedup_period":1036800},"batch_id":"id"}', '{"drop_duplicates":true,"dedup_key":"mid","dedup_period":1036800}', '{"$schema":"http://json-schema.org/draft-04/schema#","type":"object","properties":{"identifier":{"type":"string"},"contextInfo":{"type":"null"},"generatedOn":{"type":"string"},"batchCode":{"type":"string"},"channel":{"type":"string"},"status":{"type":"string"}}}','{"redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"denorm_fields":[]}', '{"topic":"sb-dialcode-master"}', '{"data_key":"nodeUniqueId","timestamp_key":"","exclude_fields":[],"entry_topic":"sunbird-dev.masterdata.ingest","redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"index_data":false,"redis_db":6}', 'ACTIVE', '{}' , 1, 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasets" ("id", "dataset_id", "type", "name", "validation_config", "extraction_config", "dedup_config", "data_schema", "denorm_config", "router_config", "dataset_config", "status", "tags", "data_version", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-summary', 'sb-summary', 'dataset', 'sb-summary', '{"validate":true,"mode":"Strict","validation_mode":"Strict"}', '{"is_batch_event":false,"extraction_key":"","dedup_config":{"drop_duplicates":true,"dedup_key":"id","dedup_period":1036800},"batch_id":"id"}', '{"drop_duplicates":true,"dedup_key":"mid","dedup_period":1036800}', '{"$schema":"https://json-schema.org/draft/2020-12/schema","type":"object","properties":{"eid":{"type":"string"},"ver":{"type":"string"},"syncts":{"type":"integer","format":"date-time"},"ets":{"type":"integer","format":"date-time"},"flags":{"type":"object","properties":{"summary_denorm_duplicate":{"type":"boolean"}}},"mid":{"type":"string"},"uid":{"type":"string","format":"uuid"},"edata":{"type":"object","properties":{"eks":{"type":"object","properties":{"interact_events_per_min":{"type":"number"},"start_time":{"type":"integer","format":"date-time"},"interact_events_count":{"type":"integer"},"end_time":{"type":"integer","format":"date-time"},"events_summary":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"count":{"type":"integer"}}}},"time_diff":{"type":"number"},"telemetry_version":{"type":"string"},"time_spent":{"type":"number"},"item_responses":{"type":"array","additionalProperties":true},"page_summary":{"type":"array","additionalProperties":true},"env_summary":{"type":"array","additionalProperties":true}},"required":["end_time"]}}},"context":{"type":"object","properties":{"pdata":{"type":"object","properties":{"id":{"type":"string"},"ver":{"type":"string"},"model":{"type":"string"}}},"granularity":{"type":"string"},"date_range":{"type":"object","properties":{"from":{"type":"integer","format":"date-time"},"to":{"type":"integer","format":"date-time"}},"required":["to"]},"rollup":{"type":"object","properties":{"l1":{"type":"string"},"l2":{"type":"string"},"l3 ":{"type":"string"},"l4":{"type":"string"}}},"cdata":{"type":"array","additionalProperties":true}}},"dimensions":{"type":"object","properties":{"did":{"type":"string"},"pdata":{"type":"object","properties":{"id":{"type":"string"},"ver":{"type":"string"},"pid":{"type":"string"}}},"sid":{"type":"string","format":"uuid"},"channel":{"type":"string"},"type":{"type":"string"},"mode":{"type":"string"}}},"object":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"rollup":{"type":"object","properties":{"l1":{"type":"string"},"l2":{"type":"string"},"l3":{"type":"string"},"l4":{"type":"string"}}},"ver":{"type":"string"}}},"tags":{"type":"array","additionalProperties":true}},"required":["syncts","ets"]}', '{"redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"denorm_fields":[{"denorm_key":"actor.id","redis_db":3,"denorm_out_field":"userdata"},{"denorm_key":"context.did","redis_db":4,"denorm_out_field":"devicedata"},{"denorm_key":"object.id","redis_db":5,"denorm_out_field":"contentdata"},{"denorm_key":"identifier","redis_db":6,"denorm_out_field":"dialcodedata"}]}', '{"topic":"sb-summary"}', '{"data_key":"","timestamp_key":"ets","exclude_fields":[],"entry_topic":"sunbird-dev.ingest","redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"index_data":true,"redis_db":0}', 'ACTIVE', '{}' , 1, 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW()); 

    INSERT INTO "datasets" ("id", "dataset_id", "type", "name", "validation_config", "extraction_config", "dedup_config", "data_schema", "denorm_config", "router_config", "dataset_config", "status", "tags", "data_version", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry', 'sb-telemetry', 'dataset', 'sb-telemetry', '{"validate":true,"mode":"Strict","validation_mode":"Strict"}', '{"is_batch_event":true,"extraction_key":"events","dedup_config":{"drop_duplicates":true,"dedup_key":"id","dedup_period":1036800},"batch_id":"id"}', '{"drop_duplicates":true,"dedup_key":"mid","dedup_period":1036800}', '{"$schema":"https://json-schema.org/draft/2020-12/schema","type":"object","properties":{"eid":{"type":"string"},"ver":{"type":"string"},"syncts":{"type":"integer","format":"date-time"},"ets":{"type":"integer","format":"date-time"},"flags":{"type":"object","properties":{"ex_processed":{"type":"boolean"},"pp_validation_processed":{"type":"boolean"},"pp_duplicate_skipped":{"type":"boolean"},"user_denorm":{"type":"boolean"},"device_denorm":{"type":"boolean"},"loc_denorm":{"type":"boolean"},"content_denorm":{"type":"boolean"},"coll_denorm":{"type":"boolean"}}},"mid":{"type":"string","format":"uuid"},"actor":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"type":{"type":"string"}}},"edata":{"type":"object","properties":{"type":{"type":"string"},"duration":{"type":"number","oneof":[{"type":"number"},{"type":"integer"}]},"size":{"type":"integer"},"query":{"type":"string"},"filters":{"type":"object","properties":{"objectType":{"type":"array","additionalProperties":true},"version":{"type":"array","additionalProperties":true},"status":{"type":"array","additionalProperties":true},"id":{"type":"array","additionalProperties":true},"isRootOrg":{"type":"boolean"},"trackable.enabled":{"type":"string"},"channel":{"type":"object"},"framework":{"type":"object"},"resourceType":{"type":"object"},"identifier":{"type":"array","additionalProperties":true},"contentType":{"type":"array","additionalProperties":true},"mimeType":{"type":"array","additionalProperties":true},"hashTagId":{"type":"array","additionalProperties":true},"compatibilityLevel":{"type":"object","properties":{"min":{"type":"integer"},"max":{"type":"integer"}}},"createdBy":{"type":"string","format":"uuid"},"mediaType":{"type":"array","additionalProperties":true},"origin":{"type":"string"},"primaryCategory":{"type":"array","additionalProperties":true},"trackable":{"enabled":{"type":"string"}}}},"sort":{"type":"object","properties":{"lastUpdatedOn":{"type":"string"}}},"topn":{"type":"array","additionalProperties":true},"pageid":{"type":"string"},"uri":{"type":"string"},"subtype":{"type":"string"},"id":{"type":"string"},"data":{"type":"string"},"uaspec":{"type":"object","properties":{"agent":{"type":"string"},"ver":{"type":"string"},"system":{"type":"string"},"platform":{"type":"string"},"raw":{"type":"string"}}},"state":{"type":"string"},"props":{"type":"array","additionalProperties":true},"prevstate":{"type":"string"},"dspec":{"type":"object","properties":{"os":{"type":"string"},"make":{"type":"string"},"id":{"type":"string"},"idisk":{"type":"number"},"edisk":{"type":"number"},"scrn":{"type":"number"},"camera":{"type":"string"},"cpu":{"type":"string"},"sims":{"type":"integer"},"webview":{"type":"string"}}},"extra":{"type":"object","properties":{"pos":{"type":"array","additionalProperties":true},"values":{"type":"array","additionalProperties":true},"query":{"type":"string"}}},"mode":{"type":"string"}},"duration":{"format":"date-time"}},"@timestamp":{"type":"string","format":"date-time"},"context":{"type":"object","properties":{"channel":{"type":"string"},"pdata":{"type":"object","properties":{"id":{"type":"string"},"ver":{"type":"string"},"pid":{"type":"string"}}},"env":{"type":"string"},"sid":{"type":"string","format":"uuid"},"rollup":{"type":"object","properties":{"l1":{"type":"string"},"l2":{"type":"string"},"l3":{"type":"string"}}},"cdata":{"type":"array","additionalProperties":true},"did":{"type":"string","format":"uuid"},"uid":{"type":"string","format":"uuid"}}},"object":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"ver":{"type":"string"},"rollup":{"type":"object","properties":{"l1":{"type":"string"}}},"version":{"type":"string"}}},"tags":{"type":"array","additionalProperties":true}},"required":["ets","mid"]}', '{"redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"denorm_fields":[{"denorm_key":"actor.id","redis_db":3,"denorm_out_field":"userdata"},{"denorm_key":"context.did","redis_db":4,"denorm_out_field":"devicedata"},{"denorm_key":"object.id","redis_db":5,"denorm_out_field":"contentdata"},{"denorm_key":"identifier","redis_db":6,"denorm_out_field":"dialcodedata"}]}', '{"topic":"sb-telemetry"}', '{"data_key":"","timestamp_key":"ets","exclude_fields":[],"entry_topic":"sunbird-dev.ingest","redis_db_host":"obsrv-redis-master.redis.svc.cluster.local","redis_db_port":6379,"index_data":true,"redis_db":0}', 'ACTIVE', '{}', 1, 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_telemetry-events-syncts', 'telemetry-events-syncts', 'sb-telemetry', '{"type":"kafka","spec":{"dataSchema":{"dataSource":"telemetry-events-syncts","dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"mid"},{"type":"long","name":"ets"},{"type":"string","name":"@timestamp"},{"type":"string","name":"actor_id"},{"type":"string","name":"actor_type"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"type":"string","name":"context_env"},{"type":"string","name":"context_sid"},{"type":"string","name":"context_did"},{"name":"context_cdata_type"},{"name":"context_cdata_id"},{"type":"string","name":"context_rollup_l1"},{"type":"string","name":"context_rollup_l2"},{"type":"string","name":"context_rollup_l3"},{"type":"string","name":"context_rollup_l4"},{"name":"content_play_progress"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_version"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"object_rollup_l2"},{"type":"string","name":"object_rollup_l3"},{"type":"string","name":"object_rollup_l4"},{"name":"tags"},{"type":"string","name":"edata_type"},{"type":"string","name":"edata_subtype"},{"type":"string","name":"edata_mode"},{"type":"string","name":"edata_pageid"},{"type":"string","name":"edata_uri"},{"type":"string","name":"edata_id"},{"type":"double","name":"edata_duration"},{"type":"long","name":"edata_index"},{"type":"string","name":"edata_pass"},{"type":"double","name":"edata_score"},{"name":"edata_resvalues"},{"type":"string","name":"edata_item_id"},{"type":"string","name":"edata_item_type"},{"type":"string","name":"edata_item_title"},{"type":"double","name":"edata_item_maxscore"},{"type":"string","name":"edata_target_id"},{"type":"string","name":"edata_target_type"},{"type":"long","name":"edata_rating"},{"type":"string","name":"edata_comments"},{"type":"string","name":"edata_dir"},{"type":"string","name":"edata_items_id"},{"type":"string","name":"edata_items_type"},{"type":"string","name":"edata_items_origin_id"},{"type":"string","name":"edata_items_origin_type"},{"type":"string","name":"edata_items_to_id"},{"type":"string","name":"edata_items_to_type"},{"type":"string","name":"edata_plugin_id"},{"type":"string","name":"edata_plugin_ver"},{"type":"string","name":"edata_plugin_category"},{"name":"edata_props"},{"type":"string","name":"edata_state"},{"type":"string","name":"edata_prevstate"},{"type":"long","name":"edata_size"},{"name":"edata_filters_dialcodes"},{"type":"string","name":"edata_topn_identifier"},{"type":"string","name":"edata_visits_objid"},{"type":"string","name":"edata_visits_objtype"},{"type":"string","name":"edata_visits_objver"},{"type":"string","name":"edata_visits_index"},{"type":"double","name":"edata_timespent"},{"type":"long","name":"edata_pageviews"},{"type":"long","name":"edata_interactions"},{"type":"long","name":"edata_starttime"},{"type":"long","name":"edata_endtime"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_state_code"},{"type":"string","name":"device_loc_city"},{"type":"string","name":"device_loc_country_code"},{"type":"string","name":"device_loc_country"},{"type":"string","name":"device_os"},{"type":"string","name":"device_make"},{"type":"string","name":"device_id"},{"type":"long","name":"device_mem"},{"type":"string","name":"device_idisk"},{"type":"string","name":"device_edisk"},{"type":"string","name":"device_scrn"},{"type":"string","name":"device_camera"},{"type":"string","name":"device_cpu"},{"type":"long","name":"device_sims"},{"type":"string","name":"device_uaspec_agent"},{"type":"string","name":"device_uaspec_ver"},{"type":"string","name":"device_uaspec_system"},{"type":"string","name":"device_uaspec_platform"},{"type":"string","name":"device_uaspec_raw"},{"type":"long","name":"device_first_access"},{"type":"string","name":"device_loc_state_custom_code"},{"type":"string","name":"device_loc_state_custom_name"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"user_declared_state"},{"type":"string","name":"user_declared_district"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"content_name"},{"type":"string","name":"content_object_type"},{"type":"string","name":"content_type"},{"type":"string","name":"content_media_type"},{"name":"content_language"},{"name":"content_channel"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subjects"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"content_framework"},{"type":"string","name":"content_board"},{"type":"string","name":"content_status"},{"type":"double","name":"content_version"},{"type":"long","name":"content_last_submitted_on"},{"type":"long","name":"content_last_published_on"},{"type":"long","name":"content_last_updated_on"},{"type":"string","name":"content_created_by"},{"name":"content_created_for"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_object_type"},{"type":"string","name":"collection_type"},{"type":"string","name":"collection_media_type"},{"name":"collection_language"},{"name":"collection_medium"},{"name":"collection_channel"},{"name":"collection_gradelevel"},{"name":"collection_subjects"},{"type":"string","name":"collection_mimetype"},{"type":"string","name":"collection_framework"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_status"},{"type":"double","name":"collection_version"},{"type":"long","name":"collection_last_submitted_on"},{"type":"long","name":"collection_last_published_on"},{"type":"long","name":"collection_last_updated_on"},{"type":"string","name":"collection_created_by"},{"name":"collection_created_for"},{"name":"user_grade_list"},{"name":"user_language_list"},{"name":"user_subject_list"},{"type":"string","name":"user_type"},{"name":"user_roles"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"user_loc_block"},{"type":"string","name":"user_loc_cluster"},{"type":"string","name":"user_school_name"},{"type":"string","name":"dialcode_channel"},{"type":"string","name":"dialcode_batchcode"},{"type":"string","name":"dialcode_publisher"},{"type":"long","name":"dialcode_generated_on"},{"type":"long","name":"dialcode_published_on"},{"type":"string","name":"dialcode_object_type"},{"type":"string","name":"device_loc_iso_state_code"},{"name":"object_l2_created_for"},{"type":"string","name":"object_l2_framework"},{"type":"string","name":"object_l2_name"},{"type":"string","name":"object_l2_channel"},{"type":"string","name":"object_l2_mimetype"},{"name":"object_l2_medium"},{"type":"string","name":"object_l2_board"},{"type":"string","name":"object_l2_contenttype"},{"name":"object_l2_gradelevel"},{"name":"object_l2_subjects"},{"type":"string","name":"utm_source"},{"type":"string","name":"utm_content"},{"type":"string","name":"utm_medium"},{"type":"string","name":"utm_campaign"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}]},"timestampSpec":{"column":"syncts","format":"auto"},"metricsSpec":[],"granularitySpec":{"type":"uniform","segmentGranularity":"DAY","rollup":false},"transformSpec":{"transforms":[{"type":"expression","name":"utm_source","expression":"if(like(\"context_cdata_type\",'UtmSource'), context_cdata_id, '')"},{"type":"expression","name":"utm_content","expression":"if(like(\"context_cdata_type\",'UtmContent'), context_cdata_id, '')"},{"type":"expression","name":"utm_medium","expression":"if(like(\"context_cdata_type\",'UtmMedium'), context_cdata_id, '')"},{"type":"expression","name":"utm_campaign","expression":"if(like(\"context_cdata_type\",'UtmCampaign'), context_cdata_id, '')"},{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"tuningConfig":{"type":"kafka","maxBytesInMemory":134217728,"maxRowsPerSegment":500000,"logParseExceptions":true},"ioConfig":{"type":"kafka","topic":"sb-telemetry","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT7200S","useEarliestOffset":true,"completionTimeout":"PT7200S","inputFormat":{"type":"json","flattenSpec":{"useFieldDiscovery":true,"fields":[{"type":"path","expr":"$.eid","name":"eid"},{"type":"path","expr":"$.mid","name":"mid"},{"type":"path","expr":"$.ets","name":"ets"},{"type":"path","expr":"$.@timestamp","name":"@timestamp"},{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"actor_type","expr":"$.actor.type"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"context_env","expr":"$.context.env"},{"type":"path","name":"context_sid","expr":"$.context.sid"},{"type":"path","name":"context_did","expr":"$.context.did"},{"type":"path","name":"context_cdata_type","expr":"$.context.cdata[*].type"},{"type":"path","name":"context_cdata_id","expr":"$.context.cdata[*].id"},{"type":"path","name":"context_rollup_l1","expr":"$.context.rollup.l1"},{"type":"path","name":"context_rollup_l2","expr":"$.context.rollup.l2"},{"type":"path","name":"context_rollup_l3","expr":"$.context.rollup.l3"},{"type":"path","name":"context_rollup_l4","expr":"$.context.rollup.l4"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_version","expr":"$.object.ver"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"object_rollup_l2","expr":"$.object.rollup.l2"},{"type":"path","name":"object_rollup_l3","expr":"$.object.rollup.l3"},{"type":"path","name":"object_rollup_l4","expr":"$.object.rollup.l4"},{"type":"path","expr":"$.tags","name":"tags"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"edata_subtype","expr":"$.edata.subtype"},{"type":"path","name":"edata_mode","expr":"$.edata.mode"},{"type":"path","name":"edata_pageid","expr":"$.edata.pageid"},{"type":"path","name":"edata_uri","expr":"$.edata.uri"},{"type":"path","name":"edata_id","expr":"$.edata.id"},{"type":"path","name":"edata_duration","expr":"$.edata.duration"},{"type":"path","name":"edata_index","expr":"$.edata.index"},{"type":"path","name":"edata_pass","expr":"$.edata.pass"},{"type":"path","name":"edata_score","expr":"$.edata.score"},{"type":"path","name":"edata_resvalues","expr":"$.edata.resvalues[*]"},{"type":"path","name":"edata_item_id","expr":"$.edata.item.id"},{"type":"path","name":"edata_item_type","expr":"$.edata.item.type"},{"type":"path","name":"edata_item_title","expr":"$.edata.item.title"},{"type":"path","name":"edata_item_maxscore","expr":"$.edata.item.maxscore"},{"type":"path","name":"edata_target_id","expr":"$.edata.target.id"},{"type":"path","name":"edata_target_type","expr":"$.edata.target.type"},{"type":"path","name":"edata_rating","expr":"$.edata.rating"},{"type":"path","name":"edata_comments","expr":"$.edata.comments"},{"type":"path","name":"edata_dir","expr":"$.edata.dir"},{"type":"path","name":"edata_items_id","expr":"$.edata.items[*].id"},{"type":"path","name":"edata_items_type","expr":"$.edata.items[*].type"},{"type":"path","name":"edata_items_origin_id","expr":"$.edata.items[*].origin.id"},{"type":"path","name":"edata_items_origin_type","expr":"$.edata.items[*].origin.type"},{"type":"path","name":"edata_items_to_id","expr":"$.edata.items[*].to.id"},{"type":"path","name":"edata_items_to_type","expr":"$.edata.items[*].to.type"},{"type":"path","name":"edata_plugin_id","expr":"$.edata.plugin.id"},{"type":"path","name":"edata_plugin_ver","expr":"$.edata.plugin.ver"},{"type":"path","name":"edata_plugin_category","expr":"$.edata.plugin.category"},{"type":"path","name":"edata_props","expr":"$.edata.props[*]"},{"type":"path","name":"edata_state","expr":"$.edata.state"},{"type":"path","name":"edata_prevstate","expr":"$.edata.prevstate"},{"type":"path","name":"edata_size","expr":"$.edata.size"},{"type":"path","name":"edata_filters_dialcodes","expr":"$.edata.filters.dialcodes"},{"type":"path","name":"edata_topn_identifier","expr":"$.edata.topn[*].identifier"},{"type":"path","name":"edata_visits_objid","expr":"$.edata.visits[*].objid"},{"type":"path","name":"edata_visits_objtype","expr":"$.edata.visits[*].objtype"},{"type":"path","name":"edata_visits_objver","expr":"$.edata.visits[*].objver"},{"type":"path","name":"edata_visits_index","expr":"$.edata.visits[*].index"},{"type":"path","name":"edata_timespent","expr":"$.edata.timespent"},{"type":"path","name":"edata_pageviews","expr":"$.edata.pageviews"},{"type":"path","name":"edata_interactions","expr":"$.edata.interactions"},{"type":"path","name":"edata_starttime","expr":"$.edata.starttime"},{"type":"path","name":"edata_endtime","expr":"$.edata.endtime"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_state_code","expr":"$.devicedata.statecode"},{"type":"path","name":"device_loc_city","expr":"$.devicedata.city"},{"type":"path","name":"device_loc_country_code","expr":"$.devicedata.countrycode"},{"type":"path","name":"device_loc_country","expr":"$.devicedata.country"},{"type":"path","name":"device_os","expr":"$.devicedata.devicespec.os"},{"type":"path","name":"device_make","expr":"$.devicedata.devicespec.make"},{"type":"path","name":"device_id","expr":"$.devicedata.devicespec.id"},{"type":"path","name":"device_mem","expr":"$.devicedata.devicespec.mem"},{"type":"path","name":"device_idisk","expr":"$.devicedata.devicespec.idisk"},{"type":"path","name":"device_edisk","expr":"$.devicedata.devicespec.edisk"},{"type":"path","name":"device_scrn","expr":"$.devicedata.devicespec.scrn"},{"type":"path","name":"device_camera","expr":"$.devicedata.devicespec.camera"},{"type":"path","name":"device_cpu","expr":"$.devicedata.devicespec.cpu"},{"type":"path","name":"device_sims","expr":"$.devicedata.devicespec.sims"},{"type":"path","name":"device_uaspec_agent","expr":"$.devicedata.uaspec.agent"},{"type":"path","name":"device_uaspec_ver","expr":"$.devicedata.uaspec.ver"},{"type":"path","name":"device_uaspec_system","expr":"$.devicedata.uaspec.system"},{"type":"path","name":"device_uaspec_platform","expr":"$.devicedata.uaspec.platform"},{"type":"path","name":"device_uaspec_raw","expr":"$.devicedata.uaspec.raw"},{"type":"path","name":"device_first_access","expr":"$.devicedata.firstaccess"},{"type":"path","name":"device_loc_state_custom_code","expr":"$.devicedata.statecustomcode"},{"type":"path","name":"device_loc_state_custom_name","expr":"$.devicedata.statecustomname"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"},{"type":"path","name":"user_declared_state","expr":"$.devicedata.userdeclared.state"},{"type":"path","name":"user_declared_district","expr":"$.devicedata.userdeclared.district"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_channel","expr":"$.contentdata.channel"},{"type":"path","name":"content_object_type","expr":"$.contentdata.objecttype"},{"type":"path","name":"content_type","expr":"$.contentdata.contenttype"},{"type":"path","name":"content_media_type","expr":"$.contentdata.mediatype"},{"type":"path","name":"content_language","expr":"$.contentdata.language[*]"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subjects","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"content_framework","expr":"$.contentdata.framework"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_status","expr":"$.contentdata.status"},{"type":"path","name":"content_version","expr":"$.contentdata.pkgversion"},{"type":"path","name":"content_last_submitted_on","expr":"$.contentdata.lastsubmittedon"},{"type":"path","name":"content_last_published_on","expr":"$.contentdata.lastpublishedon"},{"type":"path","name":"content_last_updated_on","expr":"$.contentdata.lastupdatedon"},{"type":"path","name":"content_created_by","expr":"$.contentdata.createdby"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_channel","expr":"$.collectiondata.channel"},{"type":"path","name":"collection_object_type","expr":"$.collectiondata.objecttype"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_media_type","expr":"$.collectiondata.mediatype"},{"type":"path","name":"collection_language","expr":"$.collectiondata.language[*]"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_subjects","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_mimetype","expr":"$.collectiondata.mimetype"},{"type":"path","name":"collection_framework","expr":"$.collectiondata.framework"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_status","expr":"$.collectiondata.status"},{"type":"path","name":"collection_version","expr":"$.collectiondata.pkgversion"},{"type":"path","name":"collection_last_submitted_on","expr":"$.collectiondata.lastsubmittedon"},{"type":"path","name":"collection_last_published_on","expr":"$.collectiondata.lastpublishedon"},{"type":"path","name":"collection_last_updated_on","expr":"$.collectiondata.lastupdatedon"},{"type":"path","name":"collection_created_by","expr":"$.collectiondata.createdby"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_grade_list","expr":"$.userdata.gradelist[*]"},{"type":"path","name":"user_language_list","expr":"$.userdata.languagelist[*]"},{"type":"path","name":"user_subject_list","expr":"$.userdata.subjectlist[*]"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_roles","expr":"$.userdata.roles[*]"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"user_loc_block","expr":"$.userdata.block"},{"type":"path","name":"user_loc_cluster","expr":"$.userdata.cluster"},{"type":"path","name":"user_school_name","expr":"$.userdata.schoolname"},{"type":"path","name":"dialcode_channel","expr":"$.dialcodedata.channel"},{"type":"path","name":"dialcode_batchcode","expr":"$.dialcodedata.batchcode"},{"type":"path","name":"dialcode_publisher","expr":"$.dialcodedata.publisher"},{"type":"path","name":"dialcode_generated_on","expr":"$.dialcodedata.generatedon"},{"type":"path","name":"dialcode_published_on","expr":"$.dialcodedata.publishedon"},{"type":"path","name":"dialcode_object_type","expr":"$.dialcodedata.objecttype"},{"type":"path","name":"device_loc_iso_state_code","expr":"$.devicedata.iso3166statecode"},{"type":"path","name":"content_play_progress","expr":"$.edata.summary[*].progress"},{"type":"path","name":"object_l2_created_for","expr":"$.l2data.createdfor"},{"type":"path","name":"object_l2_framework","expr":"$.l2data.framework"},{"type":"path","name":"object_l2_name","expr":"$.l2data.name"},{"type":"path","name":"object_l2_channel","expr":"$.l2data.channel"},{"type":"path","name":"object_l2_mimetype","expr":"$.l2data.mimetype"},{"type":"path","name":"object_l2_medium","expr":"$.l2data.medium[*]"},{"type":"path","name":"object_l2_board","expr":"$.l2data.board"},{"type":"path","name":"object_l2_contenttype","expr":"$.l2data.contenttype"},{"type":"path","name":"object_l2_gradelevel","expr":"$.l2data.gradelevel[*]"},{"type":"path","name":"object_l2_subjects","expr":"$.l2data.subject[*]"},{"type":"path","expr":"$.flags.ex_processed","name":"flags_ex_processed"},{"type":"path","expr":"$.flags.pp_validation_processed","name":"flags_pp_validation_processed"},{"type":"path","expr":"$.flags.pp_duplicate_skipped","name":"flags_pp_duplicate_skipped"},{"type":"path","expr":"$.flags.user_denorm","name":"flags_user_denorm"},{"type":"path","expr":"$.flags.device_denorm","name":"flags_device_denorm"},{"type":"path","expr":"$.flags.loc_denorm","name":"flags_loc_denorm"},{"type":"path","expr":"$.flags.content_denorm","name":"flags_content_denorm"},{"type":"path","expr":"$.flags.coll_denorm","name":"flags_coll_denorm"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"}]}},"appendToExisting":false}}}', 'telemetry-events-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-summary_summary-distinct-counts', 'summary-distinct-counts', 'sb-summary', '{"type":"kafka","dataSchema":{"dataSource":"summary-distinct-counts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"syncts"},{"type":"root","name":"uid"},{"type":"path","name":"dimensions_pdata_id","expr":"$.dimensions.pdata.id"},{"type":"path","name":"dimensions_pdata_pid","expr":"$.dimensions.pdata.pid"},{"type":"path","name":"dimensions_type","expr":"$.dimensions.type"},{"type":"path","name":"dimensions_pdata_ver","expr":"$.dimensions.pdata.ver"},{"type":"path","name":"dimensions_mode","expr":"$.dimensions.mode"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_channel","expr":"$.contentdata.channel"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subject","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"dialcode_channel","expr":"$.dialcodedata.channel"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_channel","expr":"$.collectiondata.channel"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_subject","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"user_loc_block","expr":"$.userdata.block"},{"type":"path","name":"user_loc_cluster","expr":"$.userdata.cluster"},{"type":"path","name":"user_school_name","expr":"$.userdata.schoolname"},{"type":"path","name":"dimensions_did","expr":"$.dimensions.did"},{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"dimensions_pdata_id"},{"type":"string","name":"dimensions_pdata_pid"},{"type":"string","name":"dimensions_type"},{"type":"string","name":"dimensions_pdata_ver"},{"type":"string","name":"dimensions_mode"},{"type":"string","name":"content_name"},{"type":"string","name":"content_board"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_channel"},{"name":"content_subject"},{"name":"content_created_for"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"   "},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"user_type"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"user_loc_block"},{"type":"string","name":"user_loc_cluster"},{"type":"string","name":"user_school_name"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_type"},{"name":"collection_channel"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subject"},{"type":"string","name":"collection_created_for"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"metricsSpec":[{"type":"HLLSketchBuild","name":"unique_devices","fieldName":"dimensions_did"},{"type":"HLLSketchBuild","name":"unique_users","fieldName":"uid"}],"granularitySpec":{"type":"uniform","segmentGranularity":"day","queryGranularity":"day","rollup":false},"transformSpec":{"transforms":[{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"ioConfig":{"topic":"sb-summary","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT14400S","useEarliestOffset":true,"completionTimeout":"PT1800S"},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":5000000}}', 'summary-distinct-counts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-summary_summary-events-syncts', 'summary-events-syncts', 'sb-summary', '{"type":"kafka","dataSchema":{"dataSource":"summary-events-syncts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"eid"},{"type":"root","name":"mid"},{"type":"root","name":"ver"},{"type":"root","name":"ets"},{"type":"root","name":"uid"},{"type":"root","name":"syncts"},{"type":"path","name":"context_date_range_from","expr":"$.context.date_range.from"},{"type":"path","name":"context_date_range_to","expr":"$.context.date_range.to"},{"type":"path","name":"context_cdata_type","expr":"$.context.cdata[*].type"},{"type":"path","name":"context_cdata_id","expr":"$.context.cdata[*].id"},{"type":"path","name":"context_rollup_l1","expr":"$.context.rollup.l1"},{"type":"path","name":"context_rollup_l2","expr":"$.context.rollup.l2"},{"type":"path","name":"context_rollup_l3","expr":"$.context.rollup.l3"},{"type":"path","name":"context_rollup_l4","expr":"$.context.rollup.l4"},{"type":"path","name":"dimension_channel","expr":"$.dimensions.channel"},{"type":"path","name":"dimensions_did","expr":"$.dimensions.did"},{"type":"path","name":"dimensions_pdata_id","expr":"$.dimensions.pdata.id"},{"type":"path","name":"dimensions_pdata_pid","expr":"$.dimensions.pdata.pid"},{"type":"path","name":"dimensions_pdata_ver","expr":"$.dimensions.pdata.ver"},{"type":"path","name":"dimensions_sid","expr":"$.dimensions.sid"},{"type":"path","name":"dimensions_type","expr":"$.dimensions.type"},{"type":"path","name":"dimensions_mode","expr":"$.dimensions.mode"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_version","expr":"$.object.ver"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"object_rollup_l2","expr":"$.object.rollup.l2"},{"type":"path","name":"object_rollup_l3","expr":"$.object.rollup.l3"},{"type":"path","name":"object_rollup_l4","expr":"$.object.rollup.l4"},{"type":"root","name":"tags"},{"type":"path","name":"edata_time_spent","expr":"$.edata.eks.time_spent"},{"type":"path","name":"edata_time_difference","expr":"$.edata.eks.time_diff"},{"type":"path","name":"edata_interaction_count","expr":"$.edata.eks.interact_events_count"},{"type":"path","name":"edata_env_summary_env","expr":"$.edata.eks.env_summary[*].env"},{"type":"path","name":"edata_env_summary_count","expr":"$.edata.eks.env_summary[*].count"},{"type":"path","name":"edata_env_summary_time_spent","expr":"$.edata.eks.env_summary[*].time_spent"},{"type":"path","name":"edata_page_summary_id","expr":"$.edata.eks.page_summary[*].id"},{"type":"path","name":"edata_page_summary_type","expr":"$.edata.eks.page_summary[*].type"},{"type":"path","name":"edata_page_summary_env","expr":"$.edata.eks.page_summary[*].env"},{"type":"path","name":"edata_page_summary_visit_count","expr":"$.edata.eks.page_summary[*].visit_count"},{"type":"path","name":"edata_page_summary_time_spent","expr":"$.edata.eks.page_summary[*].time_spent"},{"type":"path","name":"edata_item_responses_item_id","expr":"$.edata.eks.item_responses[*].itemId"},{"type":"path","name":"edata_item_responses_time_spent","expr":"$.edata.eks.item_responses[*].timeSpent"},{"type":"path","name":"edata_item_responses_pass","expr":"$.edata.eks.item_responses[*].pass"},{"type":"path","name":"edata_item_responses_score","expr":"$.edata.eks.item_responses[*].score"},{"type":"path","name":"edata_item_responses_max_score","expr":"$.edata.eks.item_responses[*].maxScore"},{"type":"path","name":"edata_item_responses_timestamp","expr":"$.edata.eks.item_responses[*].time_stamp"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_state_code","expr":"$.devicedata.statecode"},{"type":"path","name":"device_loc_city","expr":"$.devicedata.city"},{"type":"path","name":"device_loc_country_code","expr":"$.devicedata.countrycode"},{"type":"path","name":"device_loc_country","expr":"$.devicedata.country"},{"type":"path","name":"device_os","expr":"$.devicedata.devicespec.os"},{"type":"path","name":"device_make","expr":"$.devicedata.devicespec.make"},{"type":"path","name":"device_id","expr":"$.devicedata.devicespec.id"},{"type":"path","name":"device_mem","expr":"$.devicedata.devicespec.mem"},{"type":"path","name":"device_idisk","expr":"$.devicedata.devicespec.idisk"},{"type":"path","name":"device_edisk","expr":"$.devicedata.devicespec.edisk"},{"type":"path","name":"device_scrn","expr":"$.devicedata.devicespec.scrn"},{"type":"path","name":"device_camera","expr":"$.devicedata.devicespec.camera"},{"type":"path","name":"device_cpu","expr":"$.devicedata.devicespec.cpu"},{"type":"path","name":"device_sims","expr":"$.devicedata.devicespec.sims"},{"type":"path","name":"device_uaspec_agent","expr":"$.devicedata.uaspec.agent"},{"type":"path","name":"device_uaspec_ver","expr":"$.devicedata.uaspec.ver"},{"type":"path","name":"device_uaspec_system","expr":"$.devicedata.uaspec.system"},{"type":"path","name":"device_uaspec_platform","expr":"$.devicedata.uaspec.platform"},{"type":"path","name":"device_uaspec_raw","expr":"$.devicedata.uaspec.raw"},{"type":"path","name":"device_first_access","expr":"$.devicedata.firstaccess"},{"type":"path","name":"device_loc_state_custom_code","expr":"$.devicedata.statecustomcode"},{"type":"path","name":"device_loc_state_custom_name","expr":"$.devicedata.statecustomname"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"},{"type":"path","name":"user_declared_state","expr":"$.devicedata.userdeclared.state"},{"type":"path","name":"user_declared_district","expr":"$.devicedata.userdeclared.district"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_object_type","expr":"$.contentdata.objecttype"},{"type":"path","name":"content_type","expr":"$.contentdata.contenttype"},{"type":"path","name":"content_media_type","expr":"$.contentdata.mediatype"},{"type":"path","name":"content_language","expr":"$.contentdata.language[*]"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subjects","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"content_framework","expr":"$.contentdata.framework"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_status","expr":"$.contentdata.status"},{"type":"path","name":"content_created_by","expr":"$.contentdata.createdby"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"content_version","expr":"$.contentdata.pkgversion"},{"type":"path","name":"content_last_submitted_on","expr":"$.contentdata.lastsubmittedon"},{"type":"path","name":"content_last_published_on","expr":"$.contentdata.lastpublishedon"},{"type":"path","name":"content_last_updated_on","expr":"$.contentdata.lastupdatedon"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_object_type","expr":"$.collectiondata.objecttype"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_media_type","expr":"$.collectiondata.mediatype"},{"type":"path","name":"collection_language","expr":"$.collectiondata.language[*]"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_subjects","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_mimetype","expr":"$.collectiondata.mimetype"},{"type":"path","name":"collection_framework","expr":"$.collectiondata.framework"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_status","expr":"$.collectiondata.status"},{"type":"path","name":"collection_version","expr":"$.collectiondata.pkgversion"},{"type":"path","name":"collection_last_submitted_on","expr":"$.collectiondata.lastsubmittedon"},{"type":"path","name":"collection_last_published_on","expr":"$.collectiondata.lastpublishedon"},{"type":"path","name":"collection_last_updated_on","expr":"$.collectiondata.lastupdatedon"},{"type":"path","name":"collection_created_by","expr":"$.collectiondata.createdby"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_grade_list","expr":"$.userdata.gradelist[*]"},{"type":"path","name":"user_language_list","expr":"$.userdata.languagelist[*]"},{"type":"path","name":"user_subject_list","expr":"$.userdata.subjectlist[*]"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_roles","expr":"$.userdata.roles[*]"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"device_loc_iso_state_code","expr":"$.devicedata.iso3166statecode"},{"type":"path","name":"object_l2_created_for","expr":"$.l2data.createdfor"},{"type":"path","name":"object_l2_framework","expr":"$.l2data.framework"},{"type":"path","name":"object_l2_name","expr":"$.l2data.name"},{"type":"path","name":"object_l2_channel","expr":"$.l2data.channel"},{"type":"path","name":"object_l2_mimetype","expr":"$.l2data.mimetype"},{"type":"path","name":"object_l2_medium","expr":"$.l2data.medium[*]"},{"type":"path","name":"object_l2_board","expr":"$.l2data.board"},{"type":"path","name":"object_l2_contenttype","expr":"$.l2data.contenttype"},{"type":"path","name":"object_l2_gradelevel","expr":"$.l2data.gradelevel[*]"},{"type":"path","name":"object_l2_subjects","expr":"$.l2data.subject[*]"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"mid"},{"type":"string","name":"ver"},{"type":"long","name":"syncts"},{"type":"string","name":"uid"},{"type":"long","name":"context_date_range_from"},{"name":"context_cdata_type"},{"name":"context_cdata_id"},{"type":"string","name":"context_rollup_l1"},{"type":"string","name":"context_rollup_l2"},{"type":"string","name":"context_rollup_l3"},{"type":"string","name":"context_rollup_l4"},{"type":"string","name":"dimension_channel"},{"type":"string","name":"dimensions_did"},{"type":"string","name":"dimensions_pdata_id"},{"type":"string","name":"dimensions_pdata_pid"},{"type":"string","name":"dimensions_pdata_ver"},{"type":"string","name":"dimensions_sid"},{"type":"string","name":"dimensions_type"},{"type":"string","name":"dimensions_mode"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_version"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"object_rollup_l2"},{"type":"string","name":"object_rollup_l3"},{"type":"string","name":"object_rollup_l4"},{"name":"tags"},{"type":"double","name":"edata_time_spent"},{"type":"double","name":"edata_time_difference"},{"type":"long","name":"edata_interaction_count"},{"type":"string","name":"edata_env_summary_env"},{"type":"string","name":"edata_env_summary_count"},{"type":"string","name":"edata_env_summary_time_spent"},{"type":"string","name":"edata_page_summary_id"},{"type":"string","name":"edata_page_summary_type"},{"type":"string","name":"edata_page_summary_env"},{"type":"string","name":"edata_page_summary_visit_count"},{"type":"string","name":"edata_page_summary_time_spent"},{"type":"string","name":"edata_item_responses_item_id"},{"type":"string","name":"edata_item_responses_time_spent"},{"type":"string","name":"edata_item_responses_pass"},{"type":"string","name":"edata_item_responses_score"},{"type":"string","name":"edata_item_responses_max_score"},{"type":"string","name":"edata_item_responses_timestamp"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_state_code"},{"type":"string","name":"device_loc_city"},{"type":"string","name":"device_loc_country_code"},{"type":"string","name":"device_loc_country"},{"type":"string","name":"device_os"},{"type":"string","name":"device_make"},{"type":"string","name":"device_id"},{"type":"long","name":"device_mem"},{"type":"string","name":"device_idisk"},{"type":"string","name":"device_edisk"},{"type":"string","name":"device_scrn"},{"type":"string","name":"device_camera"},{"type":"string","name":"device_cpu"},{"type":"long","name":"device_sims"},{"type":"string","name":"device_uaspec_agent"},{"type":"string","name":"device_uaspec_ver"},{"type":"string","name":"device_uaspec_system"},{"type":"string","name":"device_uaspec_platform"},{"type":"string","name":"device_uaspec_raw"},{"type":"long","name":"device_first_access"},{"type":"string","name":"device_loc_state_custom_code"},{"type":"string","name":"device_loc_state_custom_name"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"user_declared_state"},{"type":"string","name":"user_declared_district"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"content_name"},{"type":"string","name":"content_object_type"},{"type":"string","name":"content_type"},{"type":"string","name":"content_media_type"},{"name":"content_language"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subjects"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"content_framework"},{"type":"string","name":"content_board"},{"type":"string","name":"content_status"},{"type":"double","name":"content_version"},{"type":"long","name":"content_last_submitted_on"},{"type":"long","name":"content_last_published_on"},{"type":"long","name":"content_last_updated_on"},{"type":"string","name":"content_created_by"},{"name":"content_created_for"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_object_type"},{"type":"string","name":"collection_type"},{"type":"string","name":"collection_media_type"},{"name":"collection_language"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subjects"},{"type":"string","name":"collection_mimetype"},{"type":"string","name":"collection_framework"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_status"},{"type":"double","name":"collection_version"},{"type":"long","name":"collection_last_submitted_on"},{"type":"long","name":"collection_last_published_on"},{"type":"long","name":"collection_last_updated_on"},{"type":"string","name":"collection_created_by"},{"name":"collection_created_for"},{"name":"user_grade_list"},{"name":"user_language_list"},{"name":"user_subject_list"},{"type":"string","name":"user_type"},{"name":"user_roles"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"device_loc_iso_state_code"},{"name":"object_l2_created_for"},{"type":"string","name":"object_l2_framework"},{"type":"string","name":"object_l2_name"},{"type":"string","name":"object_l2_channel"},{"type":"string","name":"object_l2_mimetype"},{"name":"object_l2_medium"},{"type":"string","name":"object_l2_board"},{"type":"string","name":"object_l2_contenttype"},{"name":"object_l2_gradelevel"},{"name":"object_l2_subjects"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"metricsSpec":[{"type":"longSum","name":"total_interactions","fieldName":"edata_interaction_count"},{"type":"doubleSum","name":"total_time_spent","fieldName":"edata_time_spent"}],"granularitySpec":{"type":"uniform","segmentGranularity":"day","rollup":true},"transformSpec":{"transforms":[{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"ioConfig":{"topic":"sb-summary","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT14400S","useEarliestOffset":true,"completionTimeout":"PT1800S"},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":5000000}}', 'summary-events-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-summary_summary-rollup-syncts', 'summary-rollup-syncts', 'sb-summary', '{"type":"kafka","dataSchema":{"dataSource":"summary-rollup-syncts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"syncts"},{"type":"path","name":"dimensions_pdata_id","expr":"$.dimensions.pdata.id"},{"type":"path","name":"dimensions_pdata_pid","expr":"$.dimensions.pdata.pid"},{"type":"path","name":"dimensions_type","expr":"$.dimensions.type"},{"type":"path","name":"dimensions_pdata_ver","expr":"$.dimensions.pdata.ver"},{"type":"path","name":"dimensions_mode","expr":"$.dimensions.mode"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_channel","expr":"$.contentdata.channel"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subject","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"dialcode_channel","expr":"$.dialcodedata.channel"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_channel","expr":"$.collectiondata.channel"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_subject","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_keywords","expr":"$.collectiondata.keywords[*]"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"user_loc_block","expr":"$.userdata.block"},{"type":"path","name":"user_loc_cluster","expr":"$.userdata.cluster"},{"type":"path","name":"user_school_name","expr":"$.userdata.schoolname"},{"type":"path","name":"edata_interaction_count","expr":"$.edata.eks.interact_events_count"},{"type":"path","name":"edata_time_spent","expr":"$.edata.eks.time_spent"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"dimensions_pdata_id"},{"type":"string","name":"dimensions_pdata_pid"},{"type":"string","name":"dimensions_type"},{"type":"string","name":"dimensions_pdata_ver"},{"type":"string","name":"dimensions_mode"},{"type":"string","name":"content_name"},{"type":"string","name":"content_board"},{"type":"string","name":"content_mimetype"},{"name":"content_channel"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subject"},{"name":"content_created_for"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"dialcode_channel"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"user_type"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"user_loc_block"},{"type":"string","name":"user_loc_cluster"},{"type":"string","name":"user_school_name"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_type"},{"name":"collection_channel"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_keywords"},{"name":"collection_subject"},{"name":"collection_created_for"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"metricsSpec":[{"type":"count","name":"total_count"},{"type":"longSum","name":"total_interactions","fieldName":"edata_interaction_count","expression":null},{"type":"doubleSum","name":"total_time_spent","fieldName":"edata_time_spent","expression":null}],"granularitySpec":{"type":"uniform","segmentGranularity":"DAY","rollup":true,"intervals":null},"transformSpec":{"transforms":[{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":5000000},"ioConfig":{"topic":"sb-summary","replicas":1,"taskCount":1,"taskDuration":"PT14400S","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"useEarliestOffset":true,"completionTimeout":"PT1800S"}}', 'summary-rollup-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_telemetry-audit-rollup-syncts', 'telemetry-audit-rollup-syncts', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"telemetry-audit-rollup-syncts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":true,"fields":[{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"actor_type","expr":"$.actor.type"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_env","expr":"$.context.env"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"context_cdata_type","expr":"$.context.cdata[*].type"},{"type":"path","name":"context_cdata_id","expr":"$.context.cdata[*].id"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_version","expr":"$.object.ver"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"object_rollup_l2","expr":"$.object.rollup.l2"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"edata_state","expr":"$.edata.state"},{"type":"path","name":"edata_prevstate","expr":"$.edata.prevstate"},{"type":"path","name":"edata_duration","expr":"$.edata.duration"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_object_type","expr":"$.contentdata.objecttype"},{"type":"path","name":"content_type","expr":"$.contentdata.contenttype"},{"type":"path","name":"content_language","expr":"$.contentdata.language[*]"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subjects","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"content_framework","expr":"$.contentdata.framework"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_status","expr":"$.contentdata.status"},{"type":"path","name":"content_last_submitted_on","expr":"$.contentdata.lastsubmittedon"},{"type":"path","name":"content_last_published_on","expr":"$.contentdata.lastpublishedon"},{"type":"path","name":"content_last_updated_on","expr":"$.contentdata.lastupdatedon"},{"type":"path","name":"content_created_by","expr":"$.contentdata.createdby"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_object_type","expr":"$.collectiondata.objecttype"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_media_type","expr":"$.collectiondata.mediatype"},{"type":"path","name":"collection_language","expr":"$.collectiondata.language[*]"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_subjects","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_mimetype","expr":"$.collectiondata.mimetype"},{"type":"path","name":"collection_framework","expr":"$.collectiondata.framework"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_status","expr":"$.collectiondata.status"},{"type":"path","name":"collection_version","expr":"$.collectiondata.pkgversion"},{"type":"path","name":"collection_last_submitted_on","expr":"$.collectiondata.lastsubmittedon"},{"type":"path","name":"collection_last_published_on","expr":"$.collectiondata.lastpublishedon"},{"type":"path","name":"collection_last_updated_on","expr":"$.collectiondata.lastupdatedon"},{"type":"path","name":"collection_created_by","expr":"$.collectiondata.createdby"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"device_first_access","expr":"$.devicedata.firstaccess"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"object_l2_created_for","expr":"$.l2data.createdfor"},{"type":"path","name":"object_l2_framework","expr":"$.l2data.framework"},{"type":"path","name":"object_l2_name","expr":"$.l2data.name"},{"type":"path","name":"object_l2_channel","expr":"$.l2data.channel"},{"type":"path","name":"object_l2_mimetype","expr":"$.l2data.mimetype"},{"type":"path","name":"object_l2_medium","expr":"$.l2data.medium[*]"},{"type":"path","name":"object_l2_board","expr":"$.l2data.board"},{"type":"path","name":"object_l2_contenttype","expr":"$.l2data.contenttype"},{"type":"path","name":"object_l2_gradelevel","expr":"$.l2data.gradelevel[*]"},{"type":"path","name":"object_l2_subjects","expr":"$.l2data.subject[*]"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"actor_id"},{"type":"string","name":"actor_type"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_env"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"name":"context_cdata_type"},{"name":"context_cdata_id"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_version"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"object_rollup_l2"},{"type":"string","name":"edata_type"},{"type":"string","name":"edata_state"},{"type":"string","name":"edata_prevstate"},{"type":"string","name":"content_name"},{"type":"string","name":"content_object_type"},{"type":"string","name":"content_type"},{"name":"content_language"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subjects"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"content_framework"},{"type":"string","name":"content_board"},{"type":"string","name":"content_status"},{"type":"long","name":"content_last_submitted_on"},{"type":"long","name":"content_last_published_on"},{"type":"long","name":"content_last_updated_on"},{"type":"string","name":"content_created_by"},{"name":"content_created_for"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_object_type"},{"type":"string","name":"collection_type"},{"name":"collection_language"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subjects"},{"type":"string","name":"collection_mimetype"},{"type":"string","name":"collection_framework"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_status"},{"type":"double","name":"collection_version"},{"type":"long","name":"collection_last_submitted_on"},{"type":"long","name":"collection_last_published_on"},{"type":"long","name":"collection_last_updated_on"},{"type":"string","name":"collection_created_by"},{"name":"collection_created_for"},{"type":"string","name":"user_type"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"long","name":"device_first_access"},{"type":"string","name":"user_declared_state"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"name":"object_l2_created_for"},{"type":"string","name":"object_l2_framework"},{"type":"string","name":"object_l2_name"},{"type":"string","name":"object_l2_channel"},{"type":"string","name":"object_l2_mimetype"},{"name":"object_l2_medium"},{"type":"string","name":"object_l2_board"},{"type":"string","name":"object_l2_contenttype"},{"name":"object_l2_gradelevel"},{"name":"object_l2_subjects"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"transformSpec":{"transforms":[{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]},"metricsSpec":[{"name":"total_count","type":"count"},{"type":"doubleSum","name":"total_edata_duration","fieldName":"edata_duration"}],"granularitySpec":{"type":"uniform","segmentGranularity":"DAY","rollup":true}},"ioConfig":{"topic":"sb-telemetry","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT14400S","useEarliestOffset":true,"completionTimeout":"PT1800S"},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":5000000}}',  'telemetry-audit-rollup-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_telemetry-feedback-events', 'telemetry-feedback-events', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"telemetry-feedback-events","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":true,"fields":[{"type":"root","name":"eid"},{"type":"root","name":"mid"},{"type":"root","name":"ets"},{"type":"root","name":"@timestamp"},{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"actor_type","expr":"$.actor.type"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"context_env","expr":"$.context.env"},{"type":"path","name":"context_sid","expr":"$.context.sid"},{"type":"path","name":"context_did","expr":"$.context.did"},{"type":"path","name":"context_cdata_type","expr":"$.context.cdata[*].type"},{"type":"path","name":"context_cdata_id","expr":"$.context.cdata[*].id"},{"type":"path","name":"context_rollup_l1","expr":"$.context.rollup.l1"},{"type":"path","name":"context_rollup_l2","expr":"$.context.rollup.l2"},{"type":"path","name":"context_rollup_l3","expr":"$.context.rollup.l3"},{"type":"path","name":"context_rollup_l4","expr":"$.context.rollup.l4"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_version","expr":"$.object.ver"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"object_rollup_l2","expr":"$.object.rollup.l2"},{"type":"path","name":"object_rollup_l3","expr":"$.object.rollup.l3"},{"type":"path","name":"object_rollup_l4","expr":"$.object.rollup.l4"},{"type":"root","name":"tags"},{"type":"path","name":"edata_rating","expr":"$.edata.rating"},{"type":"path","name":"edata_comments","expr":"$.edata.comments"},{"type":"path","name":"edata_commentid","expr":"$.edata.commentid"},{"type":"path","name":"edata_commenttxt","expr":"$.edata.commenttxt"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_state_code","expr":"$.devicedata.statecode"},{"type":"path","name":"device_loc_city","expr":"$.devicedata.city"},{"type":"path","name":"device_loc_country_code","expr":"$.devicedata.countrycode"},{"type":"path","name":"device_loc_country","expr":"$.devicedata.country"},{"type":"path","name":"device_os","expr":"$.devicedata.devicespec.os"},{"type":"path","name":"device_make","expr":"$.devicedata.devicespec.make"},{"type":"path","name":"device_id","expr":"$.devicedata.devicespec.id"},{"type":"path","name":"device_mem","expr":"$.devicedata.devicespec.mem"},{"type":"path","name":"device_idisk","expr":"$.devicedata.devicespec.idisk"},{"type":"path","name":"device_edisk","expr":"$.devicedata.devicespec.edisk"},{"type":"path","name":"device_scrn","expr":"$.devicedata.devicespec.scrn"},{"type":"path","name":"device_camera","expr":"$.devicedata.devicespec.camera"},{"type":"path","name":"device_cpu","expr":"$.devicedata.devicespec.cpu"},{"type":"path","name":"device_sims","expr":"$.devicedata.devicespec.sims"},{"type":"path","name":"device_uaspec_agent","expr":"$.devicedata.uaspec.agent"},{"type":"path","name":"device_uaspec_ver","expr":"$.devicedata.uaspec.ver"},{"type":"path","name":"device_uaspec_system","expr":"$.devicedata.uaspec.system"},{"type":"path","name":"device_uaspec_platform","expr":"$.devicedata.uaspec.platform"},{"type":"path","name":"device_uaspec_raw","expr":"$.devicedata.uaspec.raw"},{"type":"path","name":"device_first_access","expr":"$.devicedata.firstaccess"},{"type":"path","name":"device_loc_state_custom_code","expr":"$.devicedata.statecustomcode"},{"type":"path","name":"device_loc_state_custom_name","expr":"$.devicedata.statecustomname"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_object_type","expr":"$.contentdata.objecttype"},{"type":"path","name":"content_type","expr":"$.contentdata.contenttype"},{"type":"path","name":"content_media_type","expr":"$.contentdata.mediatype"},{"type":"path","name":"content_language","expr":"$.contentdata.language[*]"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subjects","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"content_framework","expr":"$.contentdata.framework"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_status","expr":"$.contentdata.status"},{"type":"path","name":"content_version","expr":"$.contentdata.pkgversion"},{"type":"path","name":"content_last_submitted_on","expr":"$.contentdata.lastsubmittedon"},{"type":"path","name":"content_last_published_on","expr":"$.contentdata.lastpublishedon"},{"type":"path","name":"content_last_updated_on","expr":"$.contentdata.lastupdatedon"},{"type":"path","name":"user_grade_list","expr":"$.userdata.gradelist[*]"},{"type":"path","name":"user_language_list","expr":"$.userdata.languagelist[*]"},{"type":"path","name":"user_subject_list","expr":"$.userdata.subjectlist[*]"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_roles","expr":"$.userdata.roles[*]"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"device_loc_iso_state_code","expr":"$.devicedata.iso3166statecode"},{"type":"path","name":"object_l2_created_for","expr":"$.l2data.createdfor"},{"type":"path","name":"object_l2_framework","expr":"$.l2data.framework"},{"type":"path","name":"object_l2_name","expr":"$.l2data.name"},{"type":"path","name":"object_l2_channel","expr":"$.l2data.channel"},{"type":"path","name":"object_l2_mimetype","expr":"$.l2data.mimetype"},{"type":"path","name":"object_l2_medium","expr":"$.l2data.medium[*]"},{"type":"path","name":"object_l2_board","expr":"$.l2data.board"},{"type":"path","name":"object_l2_contenttype","expr":"$.l2data.contenttype"},{"type":"path","name":"object_l2_gradelevel","expr":"$.l2data.gradelevel[*]"},{"type":"path","name":"object_l2_subjects","expr":"$.l2data.subject[*]"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"mid"},{"type":"long","name":"ets"},{"type":"string","name":"@timestamp"},{"type":"string","name":"actor_id"},{"type":"string","name":"actor_type"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"type":"string","name":"context_env"},{"type":"string","name":"context_sid"},{"type":"string","name":"context_did"},{"name":"context_cdata_type"},{"name":"context_cdata_id"},{"type":"string","name":"context_rollup_l1"},{"type":"string","name":"context_rollup_l2"},{"type":"string","name":"context_rollup_l3"},{"type":"string","name":"context_rollup_l4"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_version"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"object_rollup_l2"},{"type":"string","name":"object_rollup_l3"},{"type":"string","name":"object_rollup_l4"},{"name":"tags"},{"type":"long","name":"edata_rating"},{"type":"string","name":"edata_comments"},{"type":"string","name":"edata_commentid"},{"type":"string","name":"edata_commenttxt"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_state_code"},{"type":"string","name":"device_loc_city"},{"type":"string","name":"device_loc_country_code"},{"type":"string","name":"device_loc_country"},{"type":"string","name":"device_os"},{"type":"string","name":"device_make"},{"type":"string","name":"device_id"},{"type":"long","name":"device_mem"},{"type":"string","name":"device_idisk"},{"type":"string","name":"device_edisk"},{"type":"string","name":"device_scrn"},{"type":"string","name":"device_camera"},{"type":"string","name":"device_cpu"},{"type":"long","name":"device_sims"},{"type":"string","name":"device_uaspec_agent"},{"type":"string","name":"device_uaspec_ver"},{"type":"string","name":"device_uaspec_system"},{"type":"string","name":"device_uaspec_platform"},{"type":"string","name":"device_uaspec_raw"},{"type":"long","name":"device_first_access"},{"type":"string","name":"device_loc_state_custom_code"},{"type":"string","name":"device_loc_state_custom_name"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"content_name"},{"type":"string","name":"content_object_type"},{"type":"string","name":"content_type"},{"type":"string","name":"content_media_type"},{"name":"content_language"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subjects"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"content_framework"},{"type":"string","name":"content_board"},{"type":"string","name":"content_status"},{"type":"double","name":"content_version"},{"type":"long","name":"content_last_submitted_on"},{"type":"long","name":"content_last_published_on"},{"type":"long","name":"content_last_updated_on"},{"name":"user_grade_list"},{"name":"user_language_list"},{"name":"user_subject_list"},{"type":"string","name":"user_type"},{"name":"user_roles"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"device_loc_iso_state_code"},{"name":"object_l2_created_for"},{"type":"string","name":"object_l2_framework"},{"type":"string","name":"object_l2_name"},{"type":"string","name":"object_l2_channel"},{"type":"string","name":"object_l2_mimetype"},{"name":"object_l2_medium"},{"type":"string","name":"object_l2_board"},{"type":"string","name":"object_l2_contenttype"},{"name":"object_l2_gradelevel"},{"name":"object_l2_subjects"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"metricsSpec":[{"type":"count","name":"count"},{"type":"longSum","name":"total_rating","fieldName":"edata_rating"}],"granularitySpec":{"type":"uniform","segmentGranularity":"day","rollup":true},"transformSpec":{"filter":{"type":"selector","dimension":"eid","value":"FEEDBACK"}}},"ioConfig":{"topic":"sb-telemetry","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT14400S","useEarliestOffset":true,"completionTimeout":"PT1800S"},"tuningConfig":{"type":"kafka","maxBytesInMemory":134217728,"maxRowsPerSegment":500000,"logParseExceptions":true}}', 'telemetry-feedback-events', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_telemetry-hourly-rollup-syncts', 'telemetry-hourly-rollup-syncts', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"telemetry-hourly-rollup-syncts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"eid"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subject","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_subject","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"dialcode_channel","expr":"$.dialcodedata.channel"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"edata_item_id","expr":"$.edata.item.id"},{"type":"path","name":"edata_item_title","expr":"$.edata.item.title"},{"type":"path","name":"edata_state","expr":"$.edata.state"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"edata_mode","expr":"$.edata.mode"},{"type":"path","name":"edata_size","expr":"$.edata.size"},{"type":"path","name":"edata_duration","expr":"$.edata.duration"},{"type":"path","name":"edata_score","expr":"$.edata.score"},{"type":"path","name":"edata_item_maxscore","expr":"$.edata.item.maxscore"},{"type":"path","name":"edata_rating","expr":"$.edata.rating"},{"type":"path","name":"edata_timespent","expr":"$.edata.timespent"},{"type":"path","name":"edata_pageviews","expr":"$.edata.pageviews"},{"type":"path","name":"edata_interactions","expr":"$.edata.interactions"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"content_name"},{"type":"string","name":"content_board"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subject"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_type"},{"type":"string","name":"collection_board"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subject"},{"type":"string","name":"dialcode_channel"},{"type":"string","name":"user_type"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"edata_type"},{"type":"string","name":"edata_mode"},{"type":"string","name":"edata_item_id"},{"type":"string","name":"edata_item_title"},{"type":"string","name":"edata_state"},{"type":"long","name":"edata_size"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"metricsSpec":[{"type":"count","name":"total_count"},{"type":"doubleSum","name":"total_edata_duration","fieldName":"edata_duration"},{"type":"doubleSum","name":"total_edata_rating","fieldName":"edata_rating"},{"type":"doubleSum","name":"total_edata_score","fieldName":"edata_score"},{"type":"doubleSum","name":"total_max_score","fieldName":"edata_item_maxscore"},{"type":"doubleSum","name":"total_edata_timespent","fieldName":"edata_timespent"},{"type":"longSum","name":"total_edata_pageviews","fieldName":"edata_pageviews"},{"type":"longSum","name":"total_edata_interactions","fieldName":"edata_interactions"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"}],"granularitySpec":{"type":"uniform","segmentGranularity":"HOUR","rollup":true},"transformSpec":{"transforms":[{"type":"expression","name":"edata_size","expression":"if((edata_size>0),1,0)"},{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"tuningConfig":{"type":"kafka","maxRowsPerSegment":5000000},"ioConfig":{"topic":"sb-telemetry","replicas":1,"taskCount":1,"taskDuration":"PT3600S","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"useEarliestOffset":true,"completionTimeout":"PT1800S"}}',  'telemetry-hourly-rollup-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_telemetry-rollup-syncts', 'telemetry-rollup-syncts', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"telemetry-rollup-syncts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"eid"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subject","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_subject","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"dialcode_channel","expr":"$.dialcodedata.channel"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"edata_item_id","expr":"$.edata.item.id"},{"type":"path","name":"edata_item_title","expr":"$.edata.item.title"},{"type":"path","name":"edata_state","expr":"$.edata.state"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"edata_size","expr":"$.edata.size"},{"type":"path","name":"edata_duration","expr":"$.edata.duration"},{"type":"path","name":"edata_score","expr":"$.edata.score"},{"type":"path","name":"edata_item_maxscore","expr":"$.edata.item.maxscore"},{"type":"path","name":"edata_rating","expr":"$.edata.rating"},{"type":"path","name":"edata_timespent","expr":"$.edata.timespent"},{"type":"path","name":"edata_pageviews","expr":"$.edata.pageviews"},{"type":"path","name":"edata_interactions","expr":"$.edata.interactions"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"content_name"},{"type":"string","name":"content_board"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subject"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_type"},{"type":"string","name":"collection_board"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subject"},{"type":"string","name":"dialcode_channel"},{"type":"string","name":"user_type"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"edata_type"},{"type":"string","name":"edata_item_id"},{"type":"string","name":"edata_item_title"},{"type":"string","name":"edata_state"},{"type":"long","name":"edata_size"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"metricsSpec":[{"type":"count","name":"total_count"},{"type":"doubleSum","name":"total_edata_duration","fieldName":"edata_duration"},{"type":"doubleSum","name":"total_edata_rating","fieldName":"edata_rating"},{"type":"doubleSum","name":"total_edata_score","fieldName":"edata_score"},{"type":"doubleSum","name":"total_max_score","fieldName":"edata_item_maxscore"},{"type":"doubleSum","name":"total_edata_timespent","fieldName":"edata_timespent"},{"type":"longSum","name":"total_edata_pageviews","fieldName":"edata_pageviews"},{"type":"longSum","name":"total_edata_interactions","fieldName":"edata_interactions"}],"granularitySpec":{"type":"uniform","segmentGranularity":"DAY","rollup":true},"transformSpec":{"filter":null,"transforms":[{"type":"expression","name":"edata_size","expression":"if((edata_size>0),1,0)"},{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":10000000},"ioConfig":{"topic":"sb-telemetry","replicas":1,"taskCount":1,"taskDuration":"PT14400S","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"useEarliestOffset":true,"completionTimeout":"PT1800S"}}',  'telemetry-rollup-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_offline-desktop-events', 'offline-desktop-events', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"offline-desktop-events","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"eid"},{"type":"root","name":"mid"},{"type":"root","name":"syncts"},{"type":"root","name":"@timestamp"},{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"actor_type","expr":"$.actor.type"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"context_env","expr":"$.context.env"},{"type":"path","name":"context_sid","expr":"$.context.sid"},{"type":"path","name":"context_did","expr":"$.context.did"},{"type":"path","name":"context_cdata_type","expr":"$.context.cdata[*].type"},{"type":"path","name":"context_cdata_id","expr":"$.context.cdata[*].id"},{"type":"path","name":"context_rollup_l1","expr":"$.context.rollup.l1"},{"type":"path","name":"context_rollup_l2","expr":"$.context.rollup.l2"},{"type":"path","name":"context_rollup_l3","expr":"$.context.rollup.l3"},{"type":"path","name":"context_rollup_l4","expr":"$.context.rollup.l4"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_version","expr":"$.object.ver"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"object_rollup_l2","expr":"$.object.rollup.l2"},{"type":"path","name":"object_rollup_l3","expr":"$.object.rollup.l3"},{"type":"path","name":"object_rollup_l4","expr":"$.object.rollup.l4"},{"type":"root","name":"tags"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"edata_subtype","expr":"$.edata.subtype"},{"type":"path","name":"edata_mode","expr":"$.edata.mode"},{"type":"path","name":"edata_pageid","expr":"$.edata.pageid"},{"type":"path","name":"edata_uri","expr":"$.edata.uri"},{"type":"path","name":"edata_id","expr":"$.edata.id"},{"type":"path","name":"edata_duration","expr":"$.edata.duration"},{"type":"path","name":"edata_index","expr":"$.edata.index"},{"type":"path","name":"edata_pass","expr":"$.edata.pass"},{"type":"path","name":"edata_score","expr":"$.edata.score"},{"type":"path","name":"edata_resvalues","expr":"$.edata.resvalues[*]"},{"type":"path","name":"edata_item_id","expr":"$.edata.item.id"},{"type":"path","name":"edata_item_title","expr":"$.edata.item.title"},{"type":"path","name":"edata_item_maxscore","expr":"$.edata.item.maxscore"},{"type":"path","name":"edata_target_id","expr":"$.edata.target.id"},{"type":"path","name":"edata_target_type","expr":"$.edata.target.type"},{"type":"path","name":"edata_rating","expr":"$.edata.rating"},{"type":"path","name":"edata_comments","expr":"$.edata.comments"},{"type":"path","name":"edata_dir","expr":"$.edata.dir"},{"type":"path","name":"edata_items_id","expr":"$.edata.items[*].id"},{"type":"path","name":"edata_items_type","expr":"$.edata.items[*].type"},{"type":"path","name":"edata_items_origin_id","expr":"$.edata.items[*].origin.id"},{"type":"path","name":"edata_items_origin_type","expr":"$.edata.items[*].origin.type"},{"type":"path","name":"edata_items_to_id","expr":"$.edata.items[*].to.id"},{"type":"path","name":"edata_items_to_type","expr":"$.edata.items[*].to.type"},{"type":"path","name":"edata_plugin_id","expr":"$.edata.plugin.id"},{"type":"path","name":"edata_plugin_ver","expr":"$.edata.plugin.ver"},{"type":"path","name":"edata_plugin_category","expr":"$.edata.plugin.category"},{"type":"path","name":"edata_props","expr":"$.edata.props[*]"},{"type":"path","name":"edata_state","expr":"$.edata.state"},{"type":"path","name":"edata_prevstate","expr":"$.edata.prevstate"},{"type":"path","name":"edata_size","expr":"$.edata.size"},{"type":"path","name":"edata_filters_dialcodes","expr":"$.edata.filters.dialcodes"},{"type":"path","name":"edata_topn_identifier","expr":"$.edata.topn[*].identifier"},{"type":"path","name":"edata_visits_objid","expr":"$.edata.visits[*].objid"},{"type":"path","name":"edata_visits_objtype","expr":"$.edata.visits[*].objtype"},{"type":"path","name":"edata_visits_objver","expr":"$.edata.visits[*].objver"},{"type":"path","name":"edata_visits_index","expr":"$.edata.visits[*].index"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_state_code","expr":"$.devicedata.statecode"},{"type":"path","name":"device_loc_city","expr":"$.devicedata.city"},{"type":"path","name":"device_loc_country_code","expr":"$.devicedata.countrycode"},{"type":"path","name":"device_loc_country","expr":"$.devicedata.country"},{"type":"path","name":"device_os","expr":"$.devicedata.devicespec.os"},{"type":"path","name":"device_make","expr":"$.devicedata.devicespec.make"},{"type":"path","name":"device_id","expr":"$.devicedata.devicespec.id"},{"type":"path","name":"device_mem","expr":"$.devicedata.devicespec.mem"},{"type":"path","name":"device_idisk","expr":"$.devicedata.devicespec.idisk"},{"type":"path","name":"device_edisk","expr":"$.devicedata.devicespec.edisk"},{"type":"path","name":"device_scrn","expr":"$.devicedata.devicespec.scrn"},{"type":"path","name":"device_camera","expr":"$.devicedata.devicespec.camera"},{"type":"path","name":"device_cpu","expr":"$.devicedata.devicespec.cpu"},{"type":"path","name":"device_sims","expr":"$.devicedata.devicespec.sims"},{"type":"path","name":"device_uaspec_agent","expr":"$.devicedata.uaspec.agent"},{"type":"path","name":"device_uaspec_ver","expr":"$.devicedata.uaspec.ver"},{"type":"path","name":"device_uaspec_system","expr":"$.devicedata.uaspec.system"},{"type":"path","name":"device_uaspec_platform","expr":"$.devicedata.uaspec.platform"},{"type":"path","name":"device_uaspec_raw","expr":"$.devicedata.uaspec.raw"},{"type":"path","name":"device_first_access","expr":"$.devicedata.firstaccess"},{"type":"path","name":"device_loc_state_custom_code","expr":"$.devicedata.statecustomcode"},{"type":"path","name":"device_loc_state_custom_name","expr":"$.devicedata.statecustomname"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"},{"type":"path","name":"user_declared_state","expr":"$.devicedata.userdeclared.state"},{"type":"path","name":"user_declared_district","expr":"$.devicedata.userdeclared.district"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_object_type","expr":"$.contentdata.objecttype"},{"type":"path","name":"content_type","expr":"$.contentdata.contenttype"},{"type":"path","name":"content_media_type","expr":"$.contentdata.mediatype"},{"type":"path","name":"content_language","expr":"$.contentdata.language[*]"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subjects","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"content_framework","expr":"$.contentdata.framework"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_status","expr":"$.contentdata.status"},{"type":"path","name":"content_version","expr":"$.contentdata.pkgversion"},{"type":"path","name":"content_last_submitted_on","expr":"$.contentdata.lastsubmittedon"},{"type":"path","name":"content_last_published_on","expr":"$.contentdata.lastpublishedon"},{"type":"path","name":"content_last_updated_on","expr":"$.contentdata.lastupdatedon"},{"type":"path","name":"content_created_by","expr":"$.contentdata.createdby"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_object_type","expr":"$.collectiondata.objecttype"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_media_type","expr":"$.collectiondata.mediatype"},{"type":"path","name":"collection_language","expr":"$.collectiondata.language[*]"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_subjects","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_mimetype","expr":"$.collectiondata.mimetype"},{"type":"path","name":"collection_framework","expr":"$.collectiondata.framework"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_status","expr":"$.collectiondata.status"},{"type":"path","name":"collection_version","expr":"$.collectiondata.pkgversion"},{"type":"path","name":"collection_last_submitted_on","expr":"$.collectiondata.lastsubmittedon"},{"type":"path","name":"collection_last_published_on","expr":"$.collectiondata.lastpublishedon"},{"type":"path","name":"collection_last_updated_on","expr":"$.collectiondata.lastupdatedon"},{"type":"path","name":"collection_created_by","expr":"$.collectiondata.createdby"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_grade_list","expr":"$.userdata.gradelist[*]"},{"type":"path","name":"user_language_list","expr":"$.userdata.languagelist[*]"},{"type":"path","name":"user_subject_list","expr":"$.userdata.subjectlist[*]"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_roles","expr":"$.userdata.roles[*]"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"dialcode_channel","expr":"$.dialcodedata.channel"},{"type":"path","name":"dialcode_batchcode","expr":"$.dialcodedata.batchcode"},{"type":"path","name":"dialcode_publisher","expr":"$.dialcodedata.publisher"},{"type":"path","name":"dialcode_generated_on","expr":"$.dialcodedata.generatedon"},{"type":"path","name":"dialcode_published_on","expr":"$.dialcodedata.publishedon"},{"type":"path","name":"dialcode_status","expr":"$.dialcodedata.status"},{"type":"path","name":"dialcode_object_type","expr":"$.dialcodedata.objecttype"},{"type":"path","name":"device_loc_iso_state_code","expr":"$.devicedata.iso3166statecode"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"mid"},{"type":"long","name":"syncts"},{"type":"string","name":"@timestamp"},{"type":"string","name":"actor_id"},{"type":"string","name":"actor_type"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"type":"string","name":"context_env"},{"type":"string","name":"context_sid"},{"type":"string","name":"context_did"},{"name":"context_cdata_type"},{"name":"context_cdata_id"},{"type":"string","name":"context_rollup_l1"},{"type":"string","name":"context_rollup_l2"},{"type":"string","name":"context_rollup_l3"},{"type":"string","name":"context_rollup_l4"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_version"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"object_rollup_l2"},{"type":"string","name":"object_rollup_l3"},{"type":"string","name":"object_rollup_l4"},{"name":"tags"},{"type":"string","name":"edata_type"},{"type":"string","name":"edata_subtype"},{"type":"string","name":"edata_mode"},{"type":"string","name":"edata_pageid"},{"type":"string","name":"edata_uri"},{"type":"string","name":"edata_id"},{"type":"double","name":"edata_duration"},{"type":"long","name":"edata_index"},{"type":"string","name":"edata_pass"},{"type":"double","name":"edata_score"},{"name":"edata_resvalues"},{"type":"string","name":"edata_item_id"},{"type":"string","name":"edata_item_title"},{"type":"double","name":"edata_item_maxscore"},{"type":"string","name":"edata_target_id"},{"type":"string","name":"edata_target_type"},{"type":"long","name":"edata_rating"},{"type":"string","name":"edata_comments"},{"type":"string","name":"edata_dir"},{"type":"string","name":"edata_items_id"},{"type":"string","name":"edata_items_type"},{"type":"string","name":"edata_items_origin_id"},{"type":"string","name":"edata_items_origin_type"},{"type":"string","name":"edata_items_to_id"},{"type":"string","name":"edata_items_to_type"},{"type":"string","name":"edata_plugin_id"},{"type":"string","name":"edata_plugin_ver"},{"type":"string","name":"edata_plugin_category"},{"name":"edata_props"},{"type":"string","name":"edata_state"},{"type":"string","name":"edata_prevstate"},{"type":"long","name":"edata_size"},{"name":"edata_filters_dialcodes"},{"type":"string","name":"edata_topn_identifier"},{"type":"string","name":"edata_visits_objid"},{"type":"string","name":"edata_visits_objtype"},{"type":"string","name":"edata_visits_objver"},{"type":"string","name":"edata_visits_index"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_state_code"},{"type":"string","name":"device_loc_city"},{"type":"string","name":"device_loc_country_code"},{"type":"string","name":"device_loc_country"},{"type":"string","name":"device_os"},{"type":"string","name":"device_make"},{"type":"string","name":"device_id"},{"type":"long","name":"device_mem"},{"type":"string","name":"device_idisk"},{"type":"string","name":"device_edisk"},{"type":"string","name":"device_scrn"},{"type":"string","name":"device_camera"},{"type":"string","name":"device_cpu"},{"type":"long","name":"device_sims"},{"type":"string","name":"device_uaspec_agent"},{"type":"string","name":"device_uaspec_ver"},{"type":"string","name":"device_uaspec_system"},{"type":"string","name":"device_uaspec_platform"},{"type":"string","name":"device_uaspec_raw"},{"type":"long","name":"device_first_access"},{"type":"string","name":"device_loc_state_custom_code"},{"type":"string","name":"device_loc_state_custom_name"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"user_declared_state"},{"type":"string","name":"user_declared_district"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"content_name"},{"type":"string","name":"content_object_type"},{"type":"string","name":"content_type"},{"type":"string","name":"content_media_type"},{"name":"content_language"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subjects"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"content_framework"},{"type":"string","name":"content_board"},{"type":"string","name":"content_status"},{"type":"double","name":"content_version"},{"type":"long","name":"content_last_submitted_on"},{"type":"long","name":"content_last_published_on"},{"type":"long","name":"content_last_updated_on"},{"type":"string","name":"content_created_by"},{"name":"content_created_for"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_object_type"},{"type":"string","name":"collection_type"},{"type":"string","name":"collection_media_type"},{"name":"collection_language"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subjects"},{"type":"string","name":"collection_mimetype"},{"type":"string","name":"collection_framework"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_status"},{"type":"double","name":"collection_version"},{"type":"long","name":"collection_last_submitted_on"},{"type":"long","name":"collection_last_published_on"},{"type":"long","name":"collection_last_updated_on"},{"type":"string","name":"collection_created_by"},{"name":"collection_created_for"},{"name":"user_grade_list"},{"name":"user_language_list"},{"name":"user_subject_list"},{"type":"string","name":"user_type"},{"name":"user_roles"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"dialcode_channel"},{"type":"string","name":"dialcode_batchcode"},{"type":"string","name":"dialcode_publisher"},{"type":"long","name":"dialcode_generated_on"},{"type":"long","name":"dialcode_published_on"},{"type":"string","name":"dialcode_status"},{"type":"string","name":"dialcode_object_type"},{"type":"string","name":"device_loc_iso_state_code"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"ets","format":"auto"}}},"metricsSpec":[],"granularitySpec":{"type":"uniform","segmentGranularity":"day","rollup":false},"transformSpec":{"filter":{"type":"selector","dimension":"context_pdata_id","value":"{{desktop_pdata_id}}"},"transforms":[{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]}},"ioConfig":{"topic":"sb-telemetry","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT14400S","useEarliestOffset":false,"completionTimeout":"PT1800S"},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":2000000}}',  'offline-desktop-events', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_course-completion-events-rollup', 'course-completion-events-rollup', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"course-completion-events-rollup","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"actor_type","expr":"$.actor.type"},{"type":"path","name":"context_channel","expr":"$.context.channel"},{"type":"path","name":"context_env","expr":"$.context.env"},{"type":"path","name":"context_pdata_id","expr":"$.context.pdata.id"},{"type":"path","name":"context_pdata_pid","expr":"$.context.pdata.pid"},{"type":"path","name":"context_pdata_ver","expr":"$.context.pdata.ver"},{"type":"path","name":"object_id","expr":"$.object.id"},{"type":"path","name":"object_type","expr":"$.object.type"},{"type":"path","name":"object_version","expr":"$.object.ver"},{"type":"path","name":"object_rollup_l1","expr":"$.object.rollup.l1"},{"type":"path","name":"object_rollup_l2","expr":"$.object.rollup.l2"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"edata_state","expr":"$.edata.state"},{"type":"path","name":"edata_prevstate","expr":"$.edata.prevstate"},{"type":"path","name":"edata_duration","expr":"$.edata.duration"},{"type":"path","name":"content_name","expr":"$.contentdata.name"},{"type":"path","name":"content_object_type","expr":"$.contentdata.objecttype"},{"type":"path","name":"content_type","expr":"$.contentdata.contenttype"},{"type":"path","name":"content_language","expr":"$.contentdata.language[*]"},{"type":"path","name":"content_medium","expr":"$.contentdata.medium[*]"},{"type":"path","name":"content_gradelevel","expr":"$.contentdata.gradelevel[*]"},{"type":"path","name":"content_subjects","expr":"$.contentdata.subject[*]"},{"type":"path","name":"content_mimetype","expr":"$.contentdata.mimetype"},{"type":"path","name":"content_framework","expr":"$.contentdata.framework"},{"type":"path","name":"content_board","expr":"$.contentdata.board"},{"type":"path","name":"content_status","expr":"$.contentdata.status"},{"type":"path","name":"content_created_by","expr":"$.contentdata.createdby"},{"type":"path","name":"content_created_for","expr":"$.contentdata.createdfor"},{"type":"path","name":"collection_name","expr":"$.collectiondata.name"},{"type":"path","name":"collection_object_type","expr":"$.collectiondata.objecttype"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"collection_media_type","expr":"$.collectiondata.mediatype"},{"type":"path","name":"collection_language","expr":"$.collectiondata.language[*]"},{"type":"path","name":"collection_medium","expr":"$.collectiondata.medium[*]"},{"type":"path","name":"collection_gradelevel","expr":"$.collectiondata.gradelevel[*]"},{"type":"path","name":"collection_subjects","expr":"$.collectiondata.subject[*]"},{"type":"path","name":"collection_mimetype","expr":"$.collectiondata.mimetype"},{"type":"path","name":"collection_framework","expr":"$.collectiondata.framework"},{"type":"path","name":"collection_board","expr":"$.collectiondata.board"},{"type":"path","name":"collection_status","expr":"$.collectiondata.status"},{"type":"path","name":"collection_version","expr":"$.collectiondata.pkgversion"},{"type":"path","name":"collection_created_by","expr":"$.collectiondata.createdby"},{"type":"path","name":"collection_created_for","expr":"$.collectiondata.createdfor"},{"type":"path","name":"user_type","expr":"$.userdata.usertype"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"user_login_type","expr":"$.userdata.userlogintype"},{"type":"path","name":"derived_loc_state","expr":"$.derivedlocationdata.state"},{"type":"path","name":"derived_loc_district","expr":"$.derivedlocationdata.district"},{"type":"path","name":"derived_loc_from","expr":"$.derivedlocationdata.from"},{"type":"path","name":"object_l2_created_for","expr":"$.l2data.createdfor"},{"type":"path","name":"object_l2_framework","expr":"$.l2data.framework"},{"type":"path","name":"object_l2_name","expr":"$.l2data.name"},{"type":"path","name":"object_l2_channel","expr":"$.l2data.channel"},{"type":"path","name":"object_l2_mimetype","expr":"$.l2data.mimetype"},{"type":"path","name":"object_l2_medium","expr":"$.l2data.medium[*]"},{"type":"path","name":"object_l2_board","expr":"$.l2data.board"},{"type":"path","name":"object_l2_contenttype","expr":"$.l2data.contenttype"},{"type":"path","name":"object_l2_gradelevel","expr":"$.l2data.gradelevel[*]"},{"type":"path","name":"object_l2_subjects","expr":"$.l2data.subject[*]"},{"type":"path","name":"device_user_declared_state","expr":"$.devicedata.user_declared_state"},{"type":"path","name":"device_user_declared_district","expr":"$.devicedata.user_declared_district"},{"type":"path","name":"user_loc_state","expr":"$.userdata.state"},{"type":"path","name":"user_loc_district","expr":"$.userdata.district"},{"type":"path","name":"device_loc_state","expr":"$.devicedata.state"},{"type":"path","name":"device_loc_district","expr":"$.devicedata.districtcustom"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"actor_id"},{"type":"string","name":"actor_type"},{"type":"string","name":"context_channel"},{"type":"string","name":"context_env"},{"type":"string","name":"context_pdata_id"},{"type":"string","name":"context_pdata_pid"},{"type":"string","name":"context_pdata_ver"},{"type":"string","name":"object_id"},{"type":"string","name":"object_type"},{"type":"string","name":"object_version"},{"type":"string","name":"object_rollup_l1"},{"type":"string","name":"object_rollup_l2"},{"type":"string","name":"edata_type"},{"type":"string","name":"edata_state"},{"type":"string","name":"edata_prevstate"},{"type":"string","name":"content_name"},{"type":"string","name":"content_object_type"},{"type":"string","name":"content_type"},{"name":"content_language"},{"name":"content_medium"},{"name":"content_gradelevel"},{"name":"content_subjects"},{"type":"string","name":"content_mimetype"},{"type":"string","name":"content_framework"},{"type":"string","name":"content_board"},{"type":"string","name":"content_status"},{"type":"string","name":"content_created_by"},{"name":"content_created_for"},{"type":"string","name":"collection_name"},{"type":"string","name":"collection_object_type"},{"type":"string","name":"collection_type"},{"name":"collection_language"},{"name":"collection_medium"},{"name":"collection_gradelevel"},{"name":"collection_subjects"},{"type":"string","name":"collection_mimetype"},{"type":"string","name":"collection_framework"},{"type":"string","name":"collection_board"},{"type":"string","name":"collection_status"},{"type":"double","name":"collection_version"},{"type":"string","name":"collection_created_by"},{"name":"collection_created_for"},{"type":"string","name":"user_type"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"user_login_type"},{"type":"string","name":"user_declared_state"},{"type":"string","name":"derived_loc_from"},{"type":"string","name":"derived_loc_state"},{"type":"string","name":"derived_loc_district"},{"name":"object_l2_created_for"},{"type":"string","name":"object_l2_framework"},{"type":"string","name":"object_l2_name"},{"type":"string","name":"object_l2_channel"},{"type":"string","name":"object_l2_mimetype"},{"name":"object_l2_medium"},{"type":"string","name":"object_l2_board"},{"type":"string","name":"object_l2_contenttype"},{"name":"object_l2_gradelevel"},{"name":"object_l2_subjects"},{"type":"string","name":"user_loc_state"},{"type":"string","name":"user_loc_district"},{"type":"string","name":"device_loc_state"},{"type":"string","name":"device_loc_district"},{"type":"string","name":"device_user_declared_state"},{"type":"string","name":"device_user_declared_district"}],"dimensionsExclusions":[]},"timestampSpec":{"column":"syncts","format":"auto"}}},"transformSpec":{"transforms":[{"type":"expression","name":"derived_loc_state","expression":"case_searched(notnull(user_loc_state), user_loc_state, notnull(device_user_declared_state), device_user_declared_state, device_loc_state)"},{"type":"expression","name":"derived_loc_district","expression":"case_searched(notnull(user_loc_district), user_loc_district, notnull(device_user_declared_district), device_user_declared_district, device_loc_district)"},{"type":"expression","name":"derived_loc_from","expression":"case_searched(notnull(user_loc_district), 'user-profile', notnull(device_user_declared_district), 'user-declared', 'ip-resolved')"}]},"metricsSpec":[{"name":"total_count","type":"count"},{"type":"doubleSum","name":"total_edata_duration","fieldName":"edata_duration"}],"granularitySpec":{"type":"uniform","segmentGranularity":"DAY","rollup":true}},"ioConfig":{"topic":"sb-telemetry","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT14400S","useEarliestOffset":false,"completionTimeout":"PT1800S"},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":5000000}}',  'course-completion-events-rollup', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());

    INSERT INTO "datasources" ("id", "datasource", "dataset_id", "ingestion_spec", "datasource_ref", "retention_period", "archival_policy", "purge_policy", "backup_config", "status", "created_by", "updated_by", "created_date", "updated_date", "published_date") VALUES ('sb-telemetry_tpd-hourly-rollup-syncts', 'tpd-hourly-rollup-syncts', 'sb-telemetry', '{"type":"kafka","dataSchema":{"dataSource":"tpd-hourly-rollup-syncts","parser":{"type":"string","parseSpec":{"format":"json","flattenSpec":{"useFieldDiscovery":false,"fields":[{"type":"root","name":"eid"},{"type":"path","name":"collection_type","expr":"$.collectiondata.contenttype"},{"type":"path","name":"context_env","expr":"$.context.env"},{"type":"path","name":"edata_id","expr":"$.edata.id"},{"type":"path","name":"edata_mode","expr":"$.edata.mode"},{"type":"path","name":"edata_pageid","expr":"$.edata.pageid"},{"type":"path","name":"edata_type","expr":"$.edata.type"},{"type":"path","name":"user_signin_type","expr":"$.userdata.usersignintype"},{"type":"path","name":"actor_id","expr":"$.actor.id"},{"type":"path","name":"context_did","expr":"$.context.did"}]},"dimensionsSpec":{"dimensions":[{"type":"string","name":"eid"},{"type":"string","name":"context_env"},{"type":"string","name":"user_signin_type"},{"type":"string","name":"collection_type"},{"type":"string","name":"edata_id"},{"type":"string","name":"edata_mode"},{"type":"string","name":"edata_pageid"},{"type":"string","name":"edata_type"},{"type":"string","name":"first_time_user"}]},"timestampSpec":{"column":"syncts","format":"auto"}}},"transformSpec":{"transforms":[{"type":"expression","name":"first_time_user  ","expression":"if(like(\"context_cdata_type\",''FirstTimeUser'') && like(\"context_cdata_id\",''true'') , ''true'',''false'')"},{"type":"expression","name":"is_playerstart_event","expression":"if((like(\"context_pdata_pid\",''%contentplayer%''), if ( \"eid\" == ''START'', ''true'',''false'') ,''true'')"}],"filter":{"type":"selector","dimension":"is_playerstart_event","value":"true"}},"metricsSpec":[{"name":"total_count","type":"count"},{"type":"HLLSketchBuild","name":"unique_devices","fieldName":"context_did"},{"type":"HLLSketchBuild","name":"unique_users","fieldName":"actor_id"}],"granularitySpec":{"type":"uniform","segmentGranularity":"hour","rollup":true}},"ioConfig":{"topic":"sb-telemetry","consumerProperties":{"bootstrap.servers":"kafka-headless.kafka.svc.local:9092"},"taskCount":1,"replicas":1,"taskDuration":"PT7200S","completionTimeout":"PT3600S"},"tuningConfig":{"type":"kafka","reportParseExceptions":false,"maxRowsPerSegment":5000000}}',  'tpd-hourly-rollup-syncts', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', '{"enabled":"false"}', 'ACTIVE', 'SYSTEM', 'SYSTEM', NOW(), NOW(), NOW());